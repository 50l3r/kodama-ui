import { Meta, Story, Canvas, Stories, ArgsTable } from '@storybook/addon-docs';
import KSelect from './k-select.vue';
import { renderArgs, renderParameters } from '../../../helpers/storybook'
import SHead from '../../../../.storybook/app/components/s-head.jsx'
import { ref } from 'vue'

export const Template = (args) => ({
    components: { KSelect },
    setup() {
      const model = ref(1);
      const options = ref([
        { value: 1, label: 'Opción 1' },
        { value: 2, label: 'Opción 2' },
        { value: 3, label: 'Opción 3' },
      ]);
      return { args, model, options };
    },
    template: `
      <k-card><k-select v-model="model" v-bind="args" :options="options" /></k-card>
    `
});

<Meta title="Data Entry/Select" component={KSelect} argTypes={renderArgs(KSelect)} decorators={[() => ({ template: '<div class="flex items-center justify-center p-10"><story /></div>' })]} />

<SHead image="https://media2.giphy.com/media/SwImQhtiNA7io/giphy.gif?cid=ecf05e47z82yq5bzlbtacqrphv0r4tr1wtbmnhzeakchqa9a&rid=giphy.gif&ct=g">🐳 KSelect</SHead>

# KInput
Con el componente `k-select` dispondrás de un selector de toda la vida pero vitaminado gracias al poder de (Vue Multiselect)[https://vue-multiselect.js.org/].

<Story name="Default" parameters={renderParameters({showPanel: true})} args={{placeholder:'Selecciona una opción'}}>
  {Template.bind({})}
</Story>

<ArgsTable story="Default" />


## **Tamaños**
Puedes cambiar el tamaño del selector con la propiedad `size`

<Canvas>
  <Story name="Sizes" argTypes={renderArgs(KSelect, {}, true)} parameters={renderParameters({showPanel: false})}>
    {() => {
      return {
        components: { KSelect },
        setup() {
          const model = ref('');
          const options = ref([
            { value: 1, label: 'Opción 1' },
            { value: 2, label: 'Opción 2' },
            { value: 3, label: 'Opción 3' },
          ]);
          return { model, options };
        },
        template: `
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              <k-select v-model="model" :options="options" size="xs" />
              <k-select v-model="model" :options="options" size="sm" />
              <k-select v-model="model" :options="options" size="md" />
              <k-select v-model="model" :options="options" size="lg" />
            </div>
          </k-card>
        `,
      };
    }}
  </Story>
</Canvas>

## **Múltiple**
Puedes cambiar el tamaño del selector con la propiedad `size`

<Canvas>
  <Story name="Multiple" argTypes={renderArgs(KSelect, {}, true)} parameters={renderParameters({showPanel: false})}>
    {() => {
      return {
        components: { KSelect },
        setup() {
          const model = ref([]);
          const options = ref([
            { value: 1, label: 'Opción 1' },
            { value: 2, label: 'Opción 2' },
            { value: 3, label: 'Opción 3' },
            { value: 4, label: 'Opción 4' },
            { value: 5, label: 'Opción 5' },
            { value: 6, label: 'Opción 6' },
          ]);
          return { model, options };
        },
        template: `
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              <k-select v-model="model" :options="options" multiple />
            </div>
          </k-card>
        `,
      };
    }}
  </Story>
</Canvas>

## **Libre**
Puedes permitir que el usuario escriba sus propias etiquetas con la propiedad `free`

<Canvas>
  <Story name="Free" argTypes={renderArgs(KSelect, {}, true)} parameters={renderParameters({showPanel: false})}>
    {() => {
      return {
        components: { KSelect },
        setup() {
          const model = ref([]);
          const options = ref([
            { value: 1, label: 'Opción 1' },
            { value: 2, label: 'Opción 2' },
            { value: 3, label: 'Opción 3' },
            { value: 4, label: 'Opción 4' },
            { value: 5, label: 'Opción 5' },
            { value: 6, label: 'Opción 6' },
          ]);
          return { model, options };
        },
        template: `
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              <k-select v-model="model" :options="options" multiple free />
            </div>
          </k-card>
        `,
      };
    }}
  </Story>
</Canvas>



## **Errores**
Define una lista de errores del input. Se mostrará un icono de alerta con el primer error.

<Canvas>
  <Story name="Errors" argTypes={renderArgs(KSelect, {}, true)} parameters={renderParameters({showPanel: false})}>
    {() => {
      return {
        components: { KSelect },
        setup() {
          const model = ref([]);
          const options = ref([
            { value: 1, label: 'Opción 1' },
            { value: 2, label: 'Opción 2' },
            { value: 3, label: 'Opción 3' },
            { value: 4, label: 'Opción 4' },
            { value: 5, label: 'Opción 5' },
            { value: 6, label: 'Opción 6' },
          ]);
          const errors = ref([{$message: 'Error 1'}]);
          return { model, options, errors };
        },
        template: `
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              <k-select v-model="model" :options="options" :errors="errors" label="Selector" />
            </div>
          </k-card>
        `,
      };
    }}
  </Story>
</Canvas>

## **Tipos**

<Canvas>
  <Story name="Tipos" argTypes={renderArgs(KSelect, {}, true)} parameters={renderParameters({showPanel: false})}>
    {() => {
      return {
        components: { KSelect },
        setup() {
          const model1 = ref(2);
          const model2 = ref([3]);
          const model3 = ref("test");
          const model4 = ref(["test"]);
          const options = ref([
            { value: 1, label: 'Opción 1' },
            { value: 2, label: 'Opción 2' },
            { value: 3, label: 'Opción 3' },
            { value: 4, label: 'Opción 4' },
            { value: 5, label: 'Opción 5' },
            { value: 6, label: 'Opción 6' },
          ]);
          return { model1, model2, model3, model4, options };
        },
        template: `
          <div class="flex flex-col gap-8">
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              {{model1}}
              <k-select v-model="model1" :options="options" label="Simple"  />
            </div>
          </k-card>
          <k-card> 
            <div class="grid grid-cols-1 gap-6 w-96">
              {{model2}}
              <k-select v-model="model2" :options="options" label="Multiple" multiple />
            </div>
          </k-card>
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              {{model3}}
              <k-select v-model="model3" :options="options" label="Simple FREE"  free />
            </div>
          </k-card>
          <k-card>
            <div class="grid grid-cols-1 gap-6 w-96">
              {{model4}}
              <k-select v-model="model4" :options="options" label="Multiple FREE" multiple free />
            </div>
          </k-card>
          </div>
        `,
      };
    }}
  </Story>
</Canvas>