var we=Object.defineProperty;var d=(e,t)=>we(e,"name",{value:t,configurable:!0});import{z as T,r as N,a as Te,d as z,k as v,l as a,B as b,o as Y,m as h,p as y,C as V,v as S,t as M,x as _,q as f,A as R,G as U,y as K,F as q,a2 as H,w as Fe,I as te,J as le,a4 as Ve,T as Ne,H as ne,D as Ke,O as qe,a6 as Se,a7 as ze}from"./vue.esm-bundler.ad0aee8d.js";import{a as D,u as Ie}from"./query.533a988f.js";import{d as X}from"./index.c83f0ef7.js";import{_ as I}from"./+plugin-vue+export-helper.ed6a1c48.js";import{m as Oe}from"./medium-zoom.esm.33ca94a8.js";import{K as Re}from"./k-badge.ab5cfb2d.js";import{u as x}from"./utils.e3374581.js";import{b as Me}from"./vue-router.da7b39ba.js";const Ae={ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}},je={index:{type:String,required:!0,description:"Clave primaria de la tabla"},store:{type:String,required:!1,description:"Nombre \xFAnico para almacenamiento en cache"},columns:{type:Array,required:!0,description:"Array con las columnas a mostrar"},data:{type:Array,default:()=>[],description:"Array con los datos a mostrar"},total:{type:Number,default:()=>0,description:"Numero total de registros para la paginaci\xF3n"},loading:{type:Boolean,default:!1,description:"Indica si se estan cargando los datos"},selected:{type:Array,required:!1,description:"Indica si se muestra la columna de checkbox y que items estan seleccionados"},header:{type:Boolean,default:!0,description:"Muestra u oculta la cabecera de la tabla"},clean:{type:Boolean,default:!1,description:"Elimina los estilos por defecto del componente"},requiredFilters:{type:Object,default:null,description:"Filtros requeridos para la consulta. No se pueden eliminar"},card:{type:[Boolean,String],default:!1,description:"Muestra los datos en forma de tarjetas"},cardTag:{type:String,default:"div"},cardClasses:{type:[String,Array],default:()=>[]}};function Be(e,t){const m=T(()=>{const c=e.columns,g=[];return c==null||c.forEach(n=>{let i=n.width||void 0;n.slot==="_image"&&(i="5rem"),n.slot&&["header","footer","content"].includes(n.slot)&&(n.slot="");const s={title:n.title,index:n.index||"",order:n.order||!1,nowrap:n.nowrap||!0,width:i,align:n.align||"left",slot:n.slot||"",makeup:n.makeup||void 0,filter:n.filter,style:{position:"relative"},url:n.url||void 0};s.nowrap&&(s.style["white-space"]="nowrap"),s.align&&(s.style["text-align"]=s.align),s.width&&(s.style.width=s.width),n.style&&(s.style={...s.style,...n.style}),g.push(s)}),g}),p=T(()=>{let c=1;return e.selected!==void 0&&c++,c+=m.value.length,c});return{cols:m,colLength:p}}d(Be,"useColumn");function Le(e){const t=d(n=>{if(e.selected){const i=e.index||"id",s=e.selected.findIndex($=>$[i]===e.data[n][i]);s>-1?e.selected.splice(s,1):e.selected.push(e.data[n])}},"toggleCheck"),m=T(()=>{const n=e.index||"id";return e.data.map(i=>!!(e.selected&&e.selected.findIndex($=>$[n]===i[n])>-1))}),p=d(()=>{if(e.selected)if(e.selected.length>=e.data.length)e.selected.splice(0,e.selected.length);else{e.selected.splice(0,e.selected.length);for(let i=0;i<e.data.length;i++)e.selected.push(e.data[i])}},"toggleGlobalCheck"),c=d(()=>{if(e.selected){const n=e.index||"id";for(let i=0;i<e.selected.length;i++){const s=e.selected[i],$=e.data.findIndex(w=>w[n]===s[i][n]);$===-1&&e.selected.splice($,1)}}},"populateChecks"),g=T(()=>!!(e.selected&&e.selected.length>=e.data.length));return{toggleCheck:t,isRowChecked:m,toggleGlobalCheck:p,populateChecks:c,isCheckedAll:g}}d(Le,"useCheck");function Ue(e){const t=N([]);return{isRowOpen:T(()=>e.data.map((c,g)=>t.value.includes(g))),toggleRow:d(c=>{t.value.includes(c)?t.value=t.value.filter(g=>g!==c):t.value.push(c)},"toggleRow")}}d(Ue,"useCollapse");const k=Te({page:1,order:null,filter:null,search:"",limit:20,reset:!0,strict:!0});function ie(e,t){const m=d((r,o=null)=>{const C=D();t.store&&(o?C.order(t.store).set(r,o):C.order(t.store).delete(r)),o?k.order?k.order[r]=o:k.order={[r]:o}:k.order&&k.order[r]&&delete k.order[r],k.reset=!0,k.page=1,e.emit("fetch",i.value)},"order"),p=d(r=>{const o=D();t.store&&o.limit(t.store).set(r),k.limit=r,k.reset=!0,k.page=1,e.emit("fetch",i.value)},"limit"),c=d((r,o)=>{const C=D();t.store&&(o!==null?C.filter(t.store).set(r,o):C.filter(t.store).delete(r)),o!==null?k.filter===null?k.filter={[r]:o}:k.filter[r]=o:o===null&&k.filter&&k.filter[r]&&delete k.filter[r],k.reset=!0,k.page=1,e.emit("fetch",i.value)},"filter"),g=d(r=>{const o=D();t.store&&o.strict(t.store).set(r),k.strict=r,e.emit("fetch",i.value)},"strict"),n=d(()=>{const r=D();t.store&&r.filter(t.store).reset(),k.page=1,k.order=null,k.filter=null,k.reset=!0,k.strict=!0,e.emit("fetch",i.value)},"resetFilters"),i=T(()=>{let r=null;if(t.requiredFilters){const o=structuredClone(t.requiredFilters);r=w(o,k.filter,k.strict)}else r=w(null,k.filter,k.strict);return{page:k.page,limit:k.limit,order:k.order,filter:r,reset:k.reset}}),s=d(()=>{const r=D();if(t.store){const o=r.get(t.store);o&&(k.order=o.order,k.limit=o.limit,k.filter=o.filter,k.strict=o.strict)}},"loadStoreParams"),$=d(r=>{let o=[];return Array.isArray(r)?r.forEach(C=>{o=o.concat($(C))}):typeof r=="object"&&Object.keys(r).forEach(C=>{const O=r[C];O&&(C==="$and"||C==="$or"?o=o.concat($(O)):o.push({field:C,value:O}))}),o},"getFieldFilters"),w=d((r=null,o=null,C=!0)=>{if(!r&&!o)return null;if(r&&!o)return r;if(!r&&o)return{[C?"$and":"$or"]:[o]};if(r&&o){["$and","$or"].includes(Object.keys(r)[0])||(r={$and:[r]});const O=$(r),A=[];return Object.keys(o).forEach(j=>{O.find(P=>P.field===j)||A.push({[j]:o[j]})}),r&&(r.$and?C?r.$and.push({$and:A}):r.$and.push({$or:A}):r.$or&&(C?r.$or.push({$and:A}):r.$or.push({$or:A}))),r}},"mergeFilters");return{order:m,loadStoreParams:s,limit:p,filter:c,query:i,resetFilters:n,strict:g}}d(ie,"useFilter");const ae=N(!1);function De(e,t){const{query:m}=ie(e,t),p=T(()=>t.data.length<t.total),c=d(()=>{p.value&&(k.page+=1,k.reset=!1,e.emit("fetch",m.value))},"loadMore"),g=T(()=>!!(t.loading||t.data.length>=t.total)),n=T(()=>t.data);return{isMore:p,loadMore:c,busy:g,data:n,refresh:d(()=>{k.page=1,k.reset=!0,e.emit("fetch",m.value)},"refresh")}}d(De,"useFetch");const re=z({name:"KTableDate",props:{value:{type:String,default:""}},setup(e){const t=T(()=>X(e.value).format("LL")),m=T(()=>Ae.ucfirst(X(e.value).fromNow()));return{props:e,text:t,from:m}}});function Pe(e,t,m,p,c,g){const n=v("k-date");return a(),b(n,{simple:"",value:e.value},null,8,["value"])}d(Pe,"_sfc_render$c");const Ye=I(re,[["render",Pe]]);re.__docgenInfo={displayName:"KTableDate",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},defaultValue:{func:!1,value:"''"}}]};const se=z({name:"KTableImage",props:{value:{type:String,default:""}},setup(e){const t=N();return Y(()=>{Oe(t.value)}),{props:e,img:t}}}),Ee="_image_1skvg_1",Ge={image:Ee},He=["src"];function Je(e,t,m,p,c,g){return a(),h("div",{class:V(["rounded-4",e.$style.image])},[y("img",{ref:"img",src:e.value,"data-zoom":""},null,8,He)],2)}d(Je,"_sfc_render$b");const Qe={$style:Ge},Ze=I(se,[["render",Je],["__cssModules",Qe]]);se.__docgenInfo={displayName:"KTableImage",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},defaultValue:{func:!1,value:"''"}}]};const oe=z({name:"KTableStatus",props:{value:{type:[String,Boolean,Number],default:""}},setup(e){const t=T(()=>typeof e.value=="string"?e.value!=="0":typeof e.value=="boolean"?e.value:typeof e.value=="number"?!!e.value:!1);return{props:e,status:t}}}),We={class:"badge badge-success"};function Xe(e,t,m,p,c,g){return a(),h("span",We,[y("i",{class:V(["fad me-2",[e.status?"fa-check":"fa-times"]])},null,2),S(" "+M(e.status?"Activo":"Inactivo"),1)])}d(Xe,"_sfc_render$a");const xe=I(oe,[["render",Xe]]);oe.__docgenInfo={displayName:"KTableStatus",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|boolean|number"},defaultValue:{func:!1,value:"''"}}]};const ue=z({name:"KTablePrice",props:{value:{type:[String,Number],default:""}},setup(){return{}}});function et(e,t,m,p,c,g){const n=v("k-price");return a(),b(n,{value:e.value},null,8,["value"])}d(et,"_sfc_render$9");const tt=I(ue,[["render",et]]);ue.__docgenInfo={displayName:"KTablePrice",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}]};const de=z({name:"KTableCode",components:{KBadge:Re},props:{value:{type:[String,Number],default:""}},setup(){return{}}});function lt(e,t,m,p,c,g){const n=v("k-icon"),i=v("k-badge");return a(),b(i,{size:"xs"},{default:_(()=>[f(n,{icon:"qrcode",class:"mr-2"}),S(" "+M(e.value),1)]),_:1})}d(lt,"_sfc_render$8");const nt=I(de,[["render",lt]]);de.__docgenInfo={displayName:"KTableCode",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}]};const ce=z({name:"KTableOrderFilter",props:{value:{type:[String,null],default:null}},emits:["order"],setup(e,t){return{order:d((p=null)=>{t.emit("order",p)},"order")}}}),at={class:"inline-block"},it={class:"inline-block"},rt={class:"inline-block"};function st(e,t,m,p,c,g){const n=v("k-button");return e.value&&e.value==="asc"?(a(),h("span",{key:0,class:"cursor-pointer",onClick:t[0]||(t[0]=i=>e.order(null))},[R(e.$slots,"default"),y("div",at,[f(n,{size:"sm",icon:"sort-up",link:"",color:"primary"})])])):e.value&&e.value==="desc"?(a(),h("span",{key:1,class:"cursor-pointer",onClick:t[1]||(t[1]=i=>e.order("asc"))},[R(e.$slots,"default"),y("div",it,[f(n,{size:"sm",icon:"sort-down",link:"",color:"primary"})])])):(a(),h("span",{key:2,class:"cursor-pointer",onClick:t[2]||(t[2]=i=>e.order("desc"))},[R(e.$slots,"default"),y("div",rt,[f(n,{size:"sm",icon:"sort",link:"",color:"gray"})])]))}d(st,"_sfc_render$7");const ot=I(ce,[["render",st]]);ce.__docgenInfo={displayName:"KTableOrderFilter",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"'asc' | 'desc' | null"},defaultValue:{func:!1,value:"null"}}],events:[{name:"order"}],slots:[{name:"default"}]};const me=z({name:"KTableLimit",props:{value:{type:Number,default:20},loading:{type:Boolean,default:!1}},emits:["limit","nextPage"],setup(e,t){const m=N(!1);return{limit:d(g=>{t.emit("limit",g)},"limit"),loadMore:d(()=>{t.emit("nextPage")},"loadMore"),visible:m}}});const ut={class:"flex flex-row justify-center"};function dt(e,t,m,p,c,g){const n=v("k-button"),i=v("k-icon"),s=v("k-dropdown-menu"),$=v("k-dropdown");return a(),h("div",ut,[f(n,{loading:e.loading,disabled:e.loading,size:"sm",class:"mr-2",onClick:t[0]||(t[0]=w=>e.loadMore())},{default:_(()=>[S(" Cargar m\xE1s ")]),_:1},8,["loading","disabled"]),f($,{placement:"top"},{content:_(()=>[f(s,null,{default:_(()=>[y("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===10}]),onClick:t[1]||(t[1]=w=>e.limit(10))}," 10 ",2)]),_:1}),f(s,null,{default:_(()=>[y("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===20}]),onClick:t[2]||(t[2]=w=>e.limit(20))}," 20 ",2)]),_:1}),f(s,null,{default:_(()=>[y("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===30}]),onClick:t[3]||(t[3]=w=>e.limit(30))}," 30 ",2)]),_:1}),f(s,null,{default:_(()=>[y("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===50}]),onClick:t[4]||(t[4]=w=>e.limit(50))}," 50 ",2)]),_:1}),f(s,null,{default:_(()=>[y("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===100}]),onClick:t[5]||(t[5]=w=>e.limit(100))}," 100 ",2)]),_:1})]),default:_(()=>[f(n,{size:"sm"},{default:_(()=>[f(i,{icon:"ellipsis"})]),_:1})]),_:1})])}d(dt,"_sfc_render$6");const ct=I(me,[["render",dt],["__scopeId","data-v-28d6f246"]]);me.__docgenInfo={displayName:"KTableLimit",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"number"},defaultValue:{func:!1,value:"20"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"limit"},{name:"nextPage"}]};const fe=z({name:"KTableFilterSelect",props:{options:{type:Object,required:!0},value:{type:Object,default:null},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=N(),p=d((n,i)=>{var s;t.emit("filter",{[n]:i}),(s=m.value)==null||s.hide()},"filter"),c=d(()=>{var n;t.emit("filter",null),(n=m.value)==null||n.hide()},"reset"),g=T(()=>e.value&&e.value.$eq!==void 0?e.value.$eq:null);return{tooltip:m,filter:p,reset:c,active:g}}}),mt={class:"inline-block"};function ft(e,t,m,p,c,g){const n=v("k-button"),i=v("k-icon"),s=v("k-dropdown-menu"),$=v("k-dropdown"),w=v("k-select-option"),r=v("k-select");return e.modal?(a(),b(r,{key:1,size:"sm"},{default:_(()=>[(a(!0),h(q,null,U(e.options,(o,C)=>(a(),b(w,{key:C,value:o.value,click:"filter('$eq', o.value)"},{default:_(()=>[o.icon?(a(),b(i,{key:0,class:"mr-2",icon:o.icon},null,8,["icon"])):K("",!0),S(" "+M(o.title),1)]),_:2},1032,["value"]))),128))]),_:1})):(a(),b($,{key:0,ref:"tooltip",placement:"bottom","max-height":200,tag:"span","hide-on-click":""},{content:_(()=>[f(s,{onClick:t[0]||(t[0]=o=>e.reset())},{default:_(()=>[f(i,{class:"mr-2",icon:"list"}),S(" Todo ")]),_:1}),(a(!0),h(q,null,U(e.options,(o,C)=>(a(),b(s,{key:C,onClick:O=>e.filter("$eq",o.value)},{default:_(()=>[o.icon?(a(),b(i,{key:0,class:"mr-2",icon:o.icon},null,8,["icon"])):K("",!0),S(" "+M(o.title),1)]),_:2},1032,["onClick"]))),128))]),default:_(()=>[y("div",mt,[f(n,{size:"sm",icon:"filter",link:"",color:e.active!==null?"primary":"gray"},null,8,["color"])])]),_:1},512))}d(ft,"_sfc_render$5");const pt=I(fe,[["render",ft]]);fe.__docgenInfo={displayName:"KTableFilterSelect",exportName:"default",description:"",tags:{},props:[{name:"options",type:{name:"KTableColumnFilter[]"},required:!0},{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const pe=z({name:"KTableFilterDate",props:{value:{type:Object,default:null},min:{type:String,default:""},max:{type:String,default:X().format("YYYY-MM-DD")},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=N(),p=T(()=>e.value&&e.value.$gte&&e.value.$lte?[e.value.$gte,e.value.$lte]:"");return{filter:d(g=>{var i;const n={$gte:`${g[0]} 00:00:00`,$lte:`${g[1]} 23:59:59`};t.emit("filter",n),(i=m.value)==null||i.hide()},"filter"),defaultValue:p,tooltip:m}}}),kt={class:"inline-block"};function vt(e,t,m,p,c,g){const n=v("k-button"),i=v("k-datepicker"),s=v("k-tooltip");return e.modal?(a(),b(i,{key:1,"min-date":e.min,"max-date":e.max,range:!0,time:!1,clearable:!0,value:e.defaultValue,size:"sm",onChange:e.filter},null,8,["min-date","max-date","value","onChange"])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"transparent",arrow:!1,"hide-on-click":"",placement:"bottom","max-width":400},{content:_(()=>[f(i,{"min-date":e.min,"max-date":e.max,range:!0,time:!1,clearable:!0,value:e.defaultValue,inline:"",onChange:e.filter},null,8,["min-date","max-date","value","onChange"])]),default:_(()=>[y("div",kt,[f(n,{size:"sm",icon:"calendar",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}d(vt,"_sfc_render$4");const gt=I(pe,[["render",vt]]);pe.__docgenInfo={displayName:"KTableFilterDate",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"max",type:{name:"string"},defaultValue:{func:!1,value:"dayjs().format('YYYY-MM-DD')"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ke=z({name:"KTableFilterRange",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:100}},emits:["filter"],setup(e,t){const m=x(),p=N("dropdown"),c=N([0,0]),g=N(),n=d(()=>{const w=document.querySelector(`#${m}`);!w||(w.innerHTML="")},"initSlider");Y(()=>{n()});const i=T(()=>e.value&&e.value.$gte&&e.value.$lte?[e.value.$gte,e.value.$lte]:"");return{id:m,dropdown:p,filter:d(()=>{const w={$gte:c.value[0],$lte:c.value[1]};g.value.hide(),t.emit("filter",w)},"filter"),defaultValue:i,reset:d(()=>{g.value.hide(),t.emit("filter",null)},"reset")}}}),yt={class:"flex items-center px-6 py-4"},bt=["id"],$t={class:"ms-10 flex align-items-center"};function ht(e,t,m,p,c,g){const n=v("k-icon"),i=v("k-tooltip");return a(),b(i,null,{content:_(()=>[y("div",yt,[y("div",{id:`${e.id}`,class:"noUi-target noUi-target-primary w-150px w-xxl-200px noUi-sm"},null,8,bt),y("div",$t,[y("a",{class:"text-danger cursor-pointer me-2 d-inline-flex",onClick:t[0]||(t[0]=(...s)=>e.reset&&e.reset(...s))},[f(n,{icon:"square-xmark",size:1})]),y("a",{class:"text-success cursor-pointer d-inline-flex",onClick:t[1]||(t[1]=(...s)=>e.filter&&e.filter(...s))},[f(n,{icon:"square-check",size:1})])])])]),default:_(()=>[f(n,{icon:"filter",class:V([{"text-primary":e.defaultValue},"ml-2"])},null,8,["class"])]),_:1})}d(ht,"_sfc_render$3");const _t=I(ke,[["render",ht]]);ke.__docgenInfo={displayName:"KTableFilterRange",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"100"}}],events:[{name:"filter"}]};const ve=z({name:"KTableFilterText",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:100},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=N(),p=N(""),c=N(!1),g=T(()=>e.value&&e.value.$like?e.value.$like:"");return Y(()=>{e.value&&e.value.$like&&(p.value=e.value.$like)}),{visible:c,tooltip:m,filter:d(()=>{var $;const s={$like:p.value};t.emit("filter",s),($=m.value)==null||$.hide()},"filter"),defaultValue:g,reset:d(()=>{var s;p.value="",t.emit("filter",null),(s=m.value)==null||s.hide()},"reset"),inputText:p}}}),Ct={class:"inline-block"},wt={class:"flex items-center"},Tt={class:"ml-4 flex items-center"},Ft={key:1,class:"flex items-center"},Vt={class:"ml-4 flex items-center"};function Nt(e,t,m,p,c,g){const n=v("k-button"),i=v("k-input"),s=v("k-tooltip");return e.modal?(a(),h("div",Ft,[f(i,{modelValue:e.inputText,"onUpdate:modelValue":t[1]||(t[1]=$=>e.inputText=$),type:"text",size:"sm",width:150,placeholder:"Lorem ipsum",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","onKeyup"]),y("div",Vt,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"filter",arrow:!1,"hide-on-click":"",placement:"bottom","max-width":400},{content:_(()=>[y("div",wt,[f(i,{modelValue:e.inputText,"onUpdate:modelValue":t[0]||(t[0]=$=>e.inputText=$),type:"text",size:"sm",width:150,placeholder:"Lorem ipsum",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","onKeyup"]),y("div",Tt,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])]),default:_(()=>[y("div",Ct,[f(n,{size:"sm",icon:"filter",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}d(Nt,"_sfc_render$2");const Kt=I(ve,[["render",Nt]]);ve.__docgenInfo={displayName:"KTableFilterText",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"100"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ge=z({name:"KTableFilterNumber",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:0},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=x(),p=N(),c=N(),g=T(()=>e.value&&e.value.$eq?e.value.$eq:"");return Y(()=>{e.value&&e.value.$eq&&(c.value=e.value.$eq)}),{id:m,filter:d(()=>{var $;const s={$eq:c.value};t.emit("filter",s),($=p.value)==null||$.hide()},"filter"),defaultValue:g,reset:d(()=>{var s;c.value=void 0,t.emit("filter",null),(s=p.value)==null||s.hide()},"reset"),inputText:c,tooltip:p}}}),qt={class:"inline-block"},St={class:"flex items-center"},zt={class:"ml-4 flex align-items-center"},It={key:1,class:"flex items-center"},Ot={class:"ml-4 flex align-items-center"};function Rt(e,t,m,p,c,g){const n=v("k-button"),i=v("k-input"),s=v("k-tooltip");return e.modal?(a(),h("div",It,[f(i,{modelValue:e.inputText,"onUpdate:modelValue":t[1]||(t[1]=$=>e.inputText=$),type:"number",size:"sm",width:90,min:e.min,max:e.max||void 0,placeholder:"0",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","min","max","onKeyup"]),y("div",Ot,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"filter",arrow:!1,"hide-on-click":"",placement:"bottom"},{content:_(()=>[y("div",St,[f(i,{modelValue:e.inputText,"onUpdate:modelValue":t[0]||(t[0]=$=>e.inputText=$),type:"number",size:"sm",width:90,min:e.min,max:e.max||void 0,placeholder:"0",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","min","max","onKeyup"]),y("div",zt,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])]),default:_(()=>[y("div",qt,[f(n,{size:"sm",icon:"filter",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}d(Rt,"_sfc_render$1");const Mt=I(ge,[["render",Rt]]);ge.__docgenInfo={displayName:"KTableFilterNumber",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ye=z({name:"KTable",autoload:!0,components:{KTableDate:Ye,KTableImage:Ze,KTableStatus:xe,KTablePrice:tt,KTableCode:nt,KTableOrder:ot,KTableLimit:ct,KTableFilterSelect:pt,KTableFilterDate:gt,KTableFilterRange:_t,KTableFilterText:Kt,KTableFilterNumber:Mt},props:je,emits:["fetch","filter"],setup(e,t){const m=d(L=>!!t.slots[L],"hasSlot"),p=x(),c=Ie(),g=Me(),n=N(!1),{isRowOpen:i,toggleRow:s}=Ue(e),{cols:$,colLength:w}=Be(e,t.slots),{toggleCheck:r,isRowChecked:o,toggleGlobalCheck:C,populateChecks:O,isCheckedAll:A}=Le(e),{isMore:j,loadMore:E,busy:P,data:J,refresh:Q}=De(t,e),{order:Z,loadStoreParams:l,limit:F,filter:u,query:G,resetFilters:B,strict:$e}=ie(t,e);Fe(J,O,{deep:!0}),O(),l();const ee=T(()=>{const L=c.get("isMobileView",!1),W=c.get("isTabletView",!1);return!!(L||W)}),he=T(()=>e.card===!0||e.card==="auto"&&ee.value),_e=d(()=>{B(),n.value=!1},"resetAndClose"),Ce=d((L,W)=>{L.url&&g.push({name:L.url.name,params:{id:W[L.url.id]}})},"goToUrl");return Y(()=>{ae.value=!0,t.emit("fetch",G.value)}),{hasSlot:m,cols:$,id:p,refresh:Q,colLength:w,toggleCheck:r,isRowChecked:o,toggleGlobalCheck:C,busy:P,enable404:ae,isCheckedAll:A,isMore:j,loadMore:E,isRowOpen:i,toggleRow:s,params:k,loadStoreParams:l,order:Z,limit:F,filter:u,resetFilters:B,strict:$e,query:G,isMobile:ee,modalOpened:n,cardMode:he,resetAndClose:_e,goToUrl:Ce}}});const be=d(e=>(Se("data-v-1a33c8a1"),e=e(),ze(),e),"_withScopeId"),At=["id"],jt={class:"k-table-header-left"},Bt={class:"whitespace-nowrap font-normal"},Lt={class:"k-table-header-toolbar"},Ut=be(()=>y("div",{class:"mx-2"},null,-1)),Dt={key:0,class:"flex z-40 absolute top-0 left-0 w-full h-full items-center justify-center bg-white bg-opacity-80 dark:bg-gray-900 dark:bg-opacity-80 cursor-progress"},Pt={class:"k-table-content"},Yt={class:"k-table-tr k-table-head"},Et={key:0,class:"k-table-td"},Gt=["checked"],Ht={class:"k-table-tr"},Jt={key:0,class:"k-table-td w-6"},Qt=["checked","onChange"],Zt={key:6},Wt=["onClick"],Xt={key:1,class:"k-table-td",align:"right"},xt=["onClick"],el={key:0,class:"k-table-tr"},tl=["colspan"],ll={key:3,class:"card-footer text-center border-0 mt-8"},nl=be(()=>y("div",{class:"ml-auto"},null,-1)),al={class:"flex flex-col -m-5"},il={key:0,class:"text-base border-b border-b-gray-100 dark:border-b-gray-700 last:border-0 uppercase font-bold p-5 flex flex-row justify-between items-center"};function rl(e,t,m,p,c,g){const n=v("k-title"),i=v("k-button"),s=v("k-icon"),$=v("k-table-order"),w=v("k-table-filter-select"),r=v("k-table-filter-date"),o=v("k-table-filter-range"),C=v("k-table-filter-text"),O=v("k-table-filter-number"),A=v("k-table-date"),j=v("k-table-image"),E=v("k-table-status"),P=v("k-table-price"),J=v("k-table-code"),Q=v("k-table-limit"),Z=v("k-drawer");return a(),h("div",{id:e.id,class:"k-table"},[e.header?(a(),h("div",{key:0,class:V(["k-table-header",{"k-table-header-clean":e.clean}])},[R(e.$slots,"header-left",{},()=>[y("h3",jt,[f(n,{size:5,bold:""},{subtitle:_(()=>[R(e.$slots,"subtitle",{selected:e.selected,query:e.query},()=>[y("span",Bt,M(e.total)+" registros ",1)],!0)]),default:_(()=>[R(e.$slots,"title",{selected:e.selected,query:e.query},()=>[S(" Listado ")],!0)]),_:3})])],!0),y("div",Lt,[R(e.$slots,"header-right",{selected:e.selected,query:e.query},void 0,!0),Ut,e.cardMode?(a(),b(i,{key:0,icon:"filter",color:e.query.filter?"primary":"gray",title:"Filtrar",loading:e.loading,class:"mr-2",onClick:t[0]||(t[0]=l=>e.modalOpened=!0)},null,8,["color","loading"])):(a(),b(i,{key:1,icon:"filter-slash",color:"gray",title:"Limpiar filtros",loading:e.loading,class:"mr-2",onClick:e.resetFilters},null,8,["loading","onClick"])),e.params.strict?(a(),b(i,{key:2,icon:"object-intersect",color:"gray",title:"Filtro estricto",loading:e.loading,class:"mr-2",onClick:t[1]||(t[1]=l=>e.strict(!1))},null,8,["loading"])):(a(),b(i,{key:3,icon:"object-union",color:"gray",title:"Filtro flexible",loading:e.loading,class:"mr-2",onClick:t[2]||(t[2]=l=>e.strict(!0))},null,8,["loading"])),f(i,{icon:"rotate",color:"primary",light:"",title:"Refrescar",loading:e.loading,onClick:e.refresh},null,8,["loading","onClick"])])],2)):K("",!0),e.cardMode?(a(),b(Ve(e.cardTag),{key:1,class:V(e.cardClasses)},{default:_(()=>[(a(!0),h(q,null,U(e.data,(l,F)=>R(e.$slots,"card",te(le({key:F},{row:l,query:e.query,index:F})),void 0,!0)),128))]),_:3},8,["class"])):(a(),h("div",{key:2,class:V(["k-table-body",{"k-table-body-clean":e.clean}])},[f(Ne,{name:"animated_fade","enter-active-class":"animate__animated animate__faster animate__fadeIn","leave-active-class":"animate__animated animate__faster animate__fadeOut"},{default:_(()=>[e.loading?(a(),h("div",Dt,[f(s,{icon:"spinner-third",spin:"",class:"text-primary",size:40})])):K("",!0)]),_:1}),y("div",Pt,[y("div",Yt,[e.selected?(a(),h("div",Et,[y("input",{type:"checkbox",class:"k-checkbox w-4 h-4 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 text-primary focus:ring-primary dark:focus:ring-primary",checked:e.isCheckedAll,onChange:t[3]||(t[3]=(...l)=>e.toggleGlobalCheck&&e.toggleGlobalCheck(...l))},null,40,Gt)])):K("",!0),(a(!0),h(q,null,U(e.cols,(l,F)=>(a(),h("div",{key:F,style:ne(l.style),class:"k-table-td"},[l.order&&l.index?(a(),b($,{key:0,value:e.params.order&&e.params.order[l.index]||null,class:"-mr-3",onOrder:u=>e.order(l.index,u)},{default:_(()=>[S(M(l.title),1)]),_:2},1032,["value","onOrder"])):(a(),h(q,{key:1},[S(M(l.title),1)],64)),l.filter&&l.index?(a(),h(q,{key:2},[l.filter.type==="select"&&l.filter.options.length>0?(a(),b(w,{key:0,options:l.filter.options,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:u=>e.filter(l.index,u)},null,8,["options","value","onFilter"])):l.filter.type==="date"?(a(),b(r,{key:1,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:u=>e.filter(l.index,u)},null,8,["min","max","value","onFilter"])):l.filter.type==="range"?(a(),b(o,{key:2,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:u=>e.filter(l.index,u)},null,8,["min","max","value","onFilter"])):l.filter.type==="text"?(a(),b(C,{key:3,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:u=>e.filter(l.index,u)},null,8,["value","onFilter"])):l.filter.type==="number"?(a(),b(O,{key:4,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:u=>e.filter(l.index,u)},null,8,["min","max","value","onFilter"])):K("",!0)],64)):K("",!0)],4))),128))]),(a(!0),h(q,null,U(e.data,(l,F)=>(a(),h(q,{key:F},[y("div",Ht,[e.selected?(a(),h("div",Jt,[y("div",null,[y("input",{type:"checkbox",class:"k-checkbox w-4 h-4 -mt-1 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 text-primary focus:ring-primary dark:focus:ring-primary",checked:e.isRowChecked[F],onChange:u=>e.toggleCheck(F)},null,40,Qt)])])):K("",!0),(a(!0),h(q,null,U(e.cols,(u,G)=>(a(),h("div",{key:G,style:ne(u.style),class:"k-table-td"},[u.makeup==="date"?(a(),b(A,{key:0,value:l[u.index],class:V({"cursor-pointer":u.url}),onClick:B=>e.goToUrl(u,l)},null,8,["value","class","onClick"])):u.makeup==="image"?(a(),b(j,{key:1,value:l[u.index]},null,8,["value"])):u.makeup==="status"?(a(),b(E,{key:2,value:l[u.index],class:V({"cursor-pointer":u.url}),onClick:B=>e.goToUrl(u,l)},null,8,["value","class","onClick"])):u.makeup==="price"?(a(),b(P,{key:3,value:l[u.index],class:V({"cursor-pointer":u.url}),onClick:B=>e.goToUrl(u,l)},null,8,["value","class","onClick"])):u.makeup==="code"?(a(),b(J,{key:4,value:l[u.index],class:V({"cursor-pointer":u.url}),onClick:B=>e.goToUrl(u,l)},null,8,["value","class","onClick"])):u.slot?R(e.$slots,u.slot,te(le({key:5},{row:l,value:l[u.index],query:e.query,index:F})),void 0,!0):(a(),h("div",Zt,[y("span",{class:V({"cursor-pointer":u.url}),onClick:B=>e.goToUrl(u,l)},M(l[u.index]),11,Wt)]))],4))),128)),e.hasSlot("content")?(a(),h("div",Xt,[y("a",{class:"btn btn-icon btn-gray-300 cursor-pointer",onClick:u=>e.toggleRow(F)},[y("i",{class:V([e.isRowOpen[F]?"fa-chevron-up":"fa-chevron-down","fas"])},null,2)],8,xt)])):K("",!0)]),e.hasSlot("content")?Ke((a(),h("tr",el,[y("td",{colspan:e.colLength},[R(e.$slots,"content",{row:l,query:e.query,index:F},void 0,!0)],8,tl)],512)),[[qe,e.isRowOpen[F]]]):K("",!0)],64))),128))])],2)),e.isMore?(a(),h("div",ll,[f(Q,{loading:e.loading,value:e.params.limit,onLimit:e.limit,onNextPage:e.loadMore},null,8,["loading","value","onLimit","onNextPage"])])):K("",!0),f(Z,{modelValue:e.modalOpened,"onUpdate:modelValue":t[5]||(t[5]=l=>e.modalOpened=l),title:"Filtros",width:400},{footer:_(()=>[nl,f(i,{icon:"filter-slash",color:"danger",class:"mr-2",onClick:e.resetAndClose},{default:_(()=>[S(" Resetear ")]),_:1},8,["onClick"]),f(i,{icon:"filter",color:"primary",onClick:t[4]||(t[4]=l=>e.modalOpened=!1)},{default:_(()=>[S(" Guardar ")]),_:1})]),default:_(()=>[y("div",al,[(a(!0),h(q,null,U(e.cols,(l,F)=>(a(),h(q,{key:F},[l.order||l.filter?(a(),h("div",il,[l.order&&l.index?(a(),b($,{key:0,value:e.params.order&&e.params.order[l.index]||null,onOrder:u=>e.order(l.index,u)},{default:_(()=>[S(M(l.title),1)]),_:2},1032,["value","onOrder"])):(a(),h(q,{key:1},[S(M(l.title),1)],64)),l.filter&&l.index?(a(),h(q,{key:2},[l.filter.type==="select"&&l.filter.options.length>0?(a(),b(w,{key:0,options:l.filter.options,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:u=>e.filter(l.index,u)},null,8,["options","value","onFilter"])):l.filter.type==="date"?(a(),b(r,{key:1,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:u=>e.filter(l.index,u)},null,8,["min","max","value","onFilter"])):l.filter.type==="range"?(a(),b(o,{key:2,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:u=>e.filter(l.index,u)},null,8,["min","max","value","onFilter"])):l.filter.type==="text"?(a(),b(C,{key:3,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:u=>e.filter(l.index,u)},null,8,["value","onFilter"])):l.filter.type==="number"?(a(),b(O,{key:4,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:u=>e.filter(l.index,u)},null,8,["min","max","value","onFilter"])):K("",!0)],64)):K("",!0)])):K("",!0)],64))),128))])]),_:1},8,["modelValue"])],8,At)}d(rl,"_sfc_render");const vl=I(ye,[["render",rl],["__scopeId","data-v-1a33c8a1"]]);ye.__docgenInfo={displayName:"KTable",exportName:"default",description:"",tags:{},events:[{name:"fetch"},{name:"filter"}],slots:[{name:"header-left"},{name:"title",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"subtitle",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"header-right",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"card",scoped:!0,bindings:[{name:"row",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"}]},{name:"col.slot",scoped:!0,description:"Slots personalizados",bindings:[{name:"row",title:"binding"},{name:"value",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"},{name:"name",title:"binding"}]},{name:"content",scoped:!0,description:"Contenido adicional de la fila",tags:{mock:[{description:"Click me",title:"mock"}]},bindings:[{name:"row",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"}]}]};export{vl as K};
//# sourceMappingURL=k-table.79231dbb.js.map
