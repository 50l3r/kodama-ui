var we=Object.defineProperty;var u=(e,t)=>we(e,"name",{value:t,configurable:!0});import{z as T,r as N,a as Te,d as S,k as y,l as a,A as b,o as Y,m as h,p as v,C as V,v as q,t as M,x as _,q as f,B as R,G as D,y as K,F as I,a2 as H,w as Fe,I as te,J as le,a4 as Ve,T as Ne,H as ne,D as Ke,O as qe,a6 as Se,a7 as ze}from"./vue.esm-bundler.3fc53486.js";import{a as U,u as Ie}from"./query.82a4ada5.js";import{d as X}from"./index.39610f2b.js";import{_ as z}from"./+plugin-vue+export-helper.ed6a1c48.js";import{m as Oe}from"./medium-zoom.esm.33ca94a8.js";import{K as Re}from"./k-badge.982ffe0c.js";import{u as x}from"./utils.e3374581.js";import{b as Me}from"./vue-router.8c0d2937.js";const Ae={ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}},je={index:{type:String,required:!0,description:"Clave primaria de la tabla"},store:{type:String,required:!1,description:"Nombre \xFAnico para almacenamiento en cache"},columns:{type:Array,required:!0,description:"Array con las columnas a mostrar"},data:{type:Array,default:()=>[],description:"Array con los datos a mostrar"},total:{type:Number,default:()=>0,description:"Numero total de registros para la paginaci\xF3n"},loading:{type:Boolean,default:!1,description:"Indica si se estan cargando los datos"},selected:{type:Array,required:!1,description:"Indica si se muestra la columna de checkbox y que items estan seleccionados"},header:{type:Boolean,default:!0,description:"Muestra u oculta la cabecera de la tabla"},clean:{type:Boolean,default:!1,description:"Elimina los estilos por defecto del componente"},requiredFilters:{type:Object,default:null,description:"Filtros requeridos para la consulta. No se pueden eliminar"},card:{type:[Boolean,String],default:!1,description:"Muestra los datos en forma de tarjetas"},cardTag:{type:String,default:"div"},cardClasses:{type:[String,Array],default:()=>[]}};function Be(e,t){const m=T(()=>{const d=e.columns,g=[];return d==null||d.forEach(n=>{let r=n.width||void 0;n.slot==="_image"&&(r="5rem"),n.slot&&["header","footer","content"].includes(n.slot)&&(n.slot="");const s={title:n.title,index:n.index||"",order:n.order||!1,nowrap:n.nowrap||!0,width:r,align:n.align||"left",slot:n.slot||"",makeup:n.makeup||void 0,filter:n.filter,style:{position:"relative"},url:n.url||void 0};s.nowrap&&(s.style["white-space"]="nowrap"),s.align&&(s.style["text-align"]=s.align),s.width&&(s.style.width=s.width),n.style&&(s.style={...s.style,...n.style}),g.push(s)}),g}),p=T(()=>{let d=1;return e.selected!==void 0&&d++,d+=m.value.length,d});return{cols:m,colLength:p}}u(Be,"useColumn");function Le(e){const t=u(n=>{if(e.selected){const r=e.index||"id",s=e.selected.findIndex($=>$[r]===e.data[n][r]);s>-1?e.selected.splice(s,1):e.selected.push(e.data[n])}},"toggleCheck"),m=T(()=>{const n=e.index||"id";return e.data.map(r=>!!(e.selected&&e.selected.findIndex($=>$[n]===r[n])>-1))}),p=u(()=>{if(e.selected)if(e.selected.length>=e.data.length)e.selected.splice(0,e.selected.length);else{e.selected.splice(0,e.selected.length);for(let r=0;r<e.data.length;r++)e.selected.push(e.data[r])}},"toggleGlobalCheck"),d=u(()=>{if(e.selected){const n=e.index||"id";for(let r=0;r<e.selected.length;r++){const s=e.selected[r],$=e.data.findIndex(C=>C[n]===s[r][n]);$===-1&&e.selected.splice($,1)}}},"populateChecks"),g=T(()=>!!(e.selected&&e.selected.length>=e.data.length));return{toggleCheck:t,isRowChecked:m,toggleGlobalCheck:p,populateChecks:d,isCheckedAll:g}}u(Le,"useCheck");function Ue(e){const t=N([]);return{isRowOpen:T(()=>e.data.map((d,g)=>t.value.includes(g))),toggleRow:u(d=>{t.value.includes(d)?t.value=t.value.filter(g=>g!==d):t.value.push(d)},"toggleRow")}}u(Ue,"useCollapse");const k=Te({page:1,order:null,filter:null,search:"",limit:20,reset:!0,strict:!0});function ie(e,t){const m=u((i,c=null)=>{const w=U();t.store&&(c?w.order(t.store).set(i,c):w.order(t.store).delete(i)),c?k.order?k.order[i]=c:k.order={[i]:c}:k.order&&k.order[i]&&delete k.order[i],k.reset=!0,k.page=1,e.emit("fetch",r.value)},"order"),p=u(i=>{const c=U();t.store&&c.limit(t.store).set(i),k.limit=i,k.reset=!0,k.page=1,e.emit("fetch",r.value)},"limit"),d=u((i,c)=>{const w=U();t.store&&(c!==null?w.filter(t.store).set(i,c):w.filter(t.store).delete(i)),c!==null?k.filter===null?k.filter={[i]:c}:k.filter[i]=c:c===null&&k.filter&&k.filter[i]&&delete k.filter[i],k.reset=!0,k.page=1,e.emit("fetch",r.value)},"filter"),g=u(i=>{const c=U();t.store&&c.strict(t.store).set(i),k.strict=i,e.emit("fetch",r.value)},"strict"),n=u(()=>{const i=U();t.store&&i.filter(t.store).reset(),k.page=1,k.order=null,k.filter=null,k.reset=!0,k.strict=!0,e.emit("fetch",r.value)},"resetFilters"),r=T(()=>{let i=null;if(t.requiredFilters){const c=structuredClone(t.requiredFilters);i=C(c,k.filter,k.strict)}else i=C(null,k.filter,k.strict);return{page:k.page,limit:k.limit,order:k.order,filter:i,reset:k.reset}}),s=u(()=>{const i=U();if(t.store){const c=i.get(t.store);c&&(k.order=c.order,k.limit=c.limit,k.filter=c.filter,k.strict=c.strict)}},"loadStoreParams"),$=u(i=>{let c=[];return Array.isArray(i)?i.forEach(w=>{c=c.concat($(w))}):typeof i=="object"&&Object.keys(i).forEach(w=>{const O=i[w];O&&(w==="$and"||w==="$or"?c=c.concat($(O)):c.push({field:w,value:O}))}),c},"getFieldFilters"),C=u((i=null,c=null,w=!0)=>{if(!i&&!c)return null;if(i&&!c)return i;if(!i&&c)return{[w?"$and":"$or"]:[c]};if(i&&c){["$and","$or"].includes(Object.keys(i)[0])||(i={$and:[i]});const O=$(i),A=[];return Object.keys(c).forEach(j=>{O.find(P=>P.field===j)||A.push({[j]:c[j]})}),i&&(i.$and?w?i.$and.push({$and:A}):i.$and.push({$or:A}):i.$or&&(w?i.$or.push({$and:A}):i.$or.push({$or:A}))),i}},"mergeFilters");return{order:m,loadStoreParams:s,limit:p,filter:d,query:r,resetFilters:n,strict:g}}u(ie,"useFilter");const ae=N(!1);function De(e,t){const{query:m}=ie(e,t),p=T(()=>t.data.length<t.total),d=u(()=>{p.value&&(k.page+=1,k.reset=!1,e.emit("fetch",m.value))},"loadMore"),g=T(()=>!!(t.loading||t.data.length>=t.total)),n=T(()=>t.data);return{isMore:p,loadMore:d,busy:g,data:n,refresh:u(()=>{k.page=1,k.reset=!0,e.emit("fetch",m.value)},"refresh")}}u(De,"useFetch");const re=S({name:"KTableDate",props:{value:{type:String,default:""}},setup(e){const t=T(()=>X(e.value).format("LL")),m=T(()=>Ae.ucfirst(X(e.value).fromNow()));return{props:e,text:t,from:m}}});function Pe(e,t,m,p,d,g){const n=y("k-date");return a(),b(n,{simple:"",value:e.value},null,8,["value"])}u(Pe,"_sfc_render$c");const Ye=z(re,[["render",Pe]]);re.__docgenInfo={displayName:"KTableDate",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},defaultValue:{func:!1,value:"''"}}]};const se=S({name:"KTableImage",props:{value:{type:String,default:""}},setup(e){const t=N();return Y(()=>{Oe(t.value)}),{props:e,img:t}}}),Ee="_image_1skvg_1",Ge={image:Ee},He=["src"];function Je(e,t,m,p,d,g){return a(),h("div",{class:V(["rounded-4",e.$style.image])},[v("img",{ref:"img",src:e.value,"data-zoom":""},null,8,He)],2)}u(Je,"_sfc_render$b");const Qe={$style:Ge},Ze=z(se,[["render",Je],["__cssModules",Qe]]);se.__docgenInfo={displayName:"KTableImage",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},defaultValue:{func:!1,value:"''"}}]};const oe=S({name:"KTableStatus",props:{value:{type:[String,Boolean,Number],default:""}},setup(e){const t=T(()=>typeof e.value=="string"?e.value!=="0":typeof e.value=="boolean"?e.value:typeof e.value=="number"?!!e.value:!1);return{props:e,status:t}}}),We={class:"badge badge-success"};function Xe(e,t,m,p,d,g){return a(),h("span",We,[v("i",{class:V(["fad me-2",[e.status?"fa-check":"fa-times"]])},null,2),q(" "+M(e.status?"Activo":"Inactivo"),1)])}u(Xe,"_sfc_render$a");const xe=z(oe,[["render",Xe]]);oe.__docgenInfo={displayName:"KTableStatus",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|boolean|number"},defaultValue:{func:!1,value:"''"}}]};const ue=S({name:"KTablePrice",props:{value:{type:[String,Number],default:""}},setup(){return{}}});function et(e,t,m,p,d,g){const n=y("k-price");return a(),b(n,{value:e.value},null,8,["value"])}u(et,"_sfc_render$9");const tt=z(ue,[["render",et]]);ue.__docgenInfo={displayName:"KTablePrice",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}]};const de=S({name:"KTableCode",components:{KBadge:Re},props:{value:{type:[String,Number],default:""}},setup(){return{}}});function lt(e,t,m,p,d,g){const n=y("k-icon"),r=y("k-badge");return a(),b(r,{size:"xs"},{default:_(()=>[f(n,{icon:"qrcode",class:"mr-2"}),q(" "+M(e.value),1)]),_:1})}u(lt,"_sfc_render$8");const nt=z(de,[["render",lt]]);de.__docgenInfo={displayName:"KTableCode",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}]};const ce=S({name:"KTableOrderFilter",props:{value:{type:[String,null],default:null}},emits:["order"],setup(e,t){return{order:u((p=null)=>{t.emit("order",p)},"order")}}}),at={class:"inline-block"},it={class:"inline-block"},rt={class:"inline-block"};function st(e,t,m,p,d,g){const n=y("k-button");return e.value&&e.value==="asc"?(a(),h("span",{key:0,class:"cursor-pointer",onClick:t[0]||(t[0]=r=>e.order(null))},[R(e.$slots,"default"),v("div",at,[f(n,{size:"sm",icon:"sort-up",link:"",color:"primary"})])])):e.value&&e.value==="desc"?(a(),h("span",{key:1,class:"cursor-pointer",onClick:t[1]||(t[1]=r=>e.order("asc"))},[R(e.$slots,"default"),v("div",it,[f(n,{size:"sm",icon:"sort-down",link:"",color:"primary"})])])):(a(),h("span",{key:2,class:"cursor-pointer",onClick:t[2]||(t[2]=r=>e.order("desc"))},[R(e.$slots,"default"),v("div",rt,[f(n,{size:"sm",icon:"sort",link:"",color:"gray"})])]))}u(st,"_sfc_render$7");const ot=z(ce,[["render",st]]);ce.__docgenInfo={displayName:"KTableOrderFilter",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"'asc' | 'desc' | null"},defaultValue:{func:!1,value:"null"}}],events:[{name:"order"}],slots:[{name:"default"}]};const me=S({name:"KTableLimit",props:{value:{type:Number,default:20},loading:{type:Boolean,default:!1}},emits:["limit","nextPage"],setup(e,t){const m=N(!1);return{limit:u(g=>{t.emit("limit",g)},"limit"),loadMore:u(()=>{t.emit("nextPage")},"loadMore"),visible:m}}});const ut={class:"flex flex-row justify-center"};function dt(e,t,m,p,d,g){const n=y("k-button"),r=y("k-icon"),s=y("k-dropdown-menu"),$=y("k-dropdown");return a(),h("div",ut,[f(n,{loading:e.loading,disabled:e.loading,size:"sm",class:"mr-2",onClick:t[0]||(t[0]=C=>e.loadMore())},{default:_(()=>[q(" Cargar m\xE1s ")]),_:1},8,["loading","disabled"]),f($,{placement:"top"},{content:_(()=>[f(s,null,{default:_(()=>[v("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===10}]),onClick:t[1]||(t[1]=C=>e.limit(10))}," 10 ",2)]),_:1}),f(s,null,{default:_(()=>[v("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===20}]),onClick:t[2]||(t[2]=C=>e.limit(20))}," 20 ",2)]),_:1}),f(s,null,{default:_(()=>[v("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===30}]),onClick:t[3]||(t[3]=C=>e.limit(30))}," 30 ",2)]),_:1}),f(s,null,{default:_(()=>[v("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===50}]),onClick:t[4]||(t[4]=C=>e.limit(50))}," 50 ",2)]),_:1}),f(s,null,{default:_(()=>[v("a",{class:V(["dropdown-item p-3 cursor-pointer",{active:e.value===100}]),onClick:t[5]||(t[5]=C=>e.limit(100))}," 100 ",2)]),_:1})]),default:_(()=>[f(n,{size:"sm"},{default:_(()=>[f(r,{icon:"ellipsis"})]),_:1})]),_:1})])}u(dt,"_sfc_render$6");const ct=z(me,[["render",dt],["__scopeId","data-v-28d6f246"]]);me.__docgenInfo={displayName:"KTableLimit",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"number"},defaultValue:{func:!1,value:"20"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"limit"},{name:"nextPage"}]};const fe=S({name:"KTableFilterSelect",props:{options:{type:Object,required:!0},value:{type:Object,default:null},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=N(),p=u((n,r)=>{var s;t.emit("filter",{[n]:r}),(s=m.value)==null||s.hide()},"filter"),d=u(()=>{var n;t.emit("filter",null),(n=m.value)==null||n.hide()},"reset"),g=T(()=>e.value&&e.value.$eq!==void 0?e.value.$eq:null);return{tooltip:m,filter:p,reset:d,active:g}}}),mt={class:"inline-block"},ft=["onClick"];function pt(e,t,m,p,d,g){const n=y("k-button"),r=y("k-icon"),s=y("k-dropdown-menu"),$=y("k-dropdown"),C=y("k-select");return e.modal?(a(),b(C,{key:1,size:"sm",option:e.options,"close-on-select":!0,"track-by":"value","label-by":"title"},{option:_(({option:i})=>[v("div",{onClick:c=>e.filter("$eq",i.value)},[i.icon?(a(),b(r,{key:0,class:"mr-2",icon:i.icon},null,8,["icon"])):K("",!0),q(" "+M(i.title)+"asdasd ",1)],8,ft)]),_:1},8,["option"])):(a(),b($,{key:0,ref:"tooltip",placement:"bottom","max-height":200,tag:"span","hide-on-click":""},{content:_(()=>[f(s,{onClick:t[0]||(t[0]=i=>e.reset())},{default:_(()=>[f(r,{class:"mr-2",icon:"list"}),q(" Todo ")]),_:1}),(a(!0),h(I,null,D(e.options,(i,c)=>(a(),b(s,{key:c,onClick:w=>e.filter("$eq",i.value)},{default:_(()=>[i.icon?(a(),b(r,{key:0,class:"mr-2",icon:i.icon},null,8,["icon"])):K("",!0),q(" "+M(i.title),1)]),_:2},1032,["onClick"]))),128))]),default:_(()=>[v("div",mt,[f(n,{size:"sm",icon:"filter",link:"",color:e.active!==null?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(pt,"_sfc_render$5");const kt=z(fe,[["render",pt]]);fe.__docgenInfo={displayName:"KTableFilterSelect",exportName:"default",description:"",tags:{},props:[{name:"options",type:{name:"KTableColumnFilter[]"},required:!0},{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const pe=S({name:"KTableFilterDate",props:{value:{type:Object,default:null},min:{type:String,default:""},max:{type:String,default:X().format("YYYY-MM-DD")},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=N(),p=T(()=>e.value&&e.value.$gte&&e.value.$lte?[e.value.$gte,e.value.$lte]:"");return{filter:u(g=>{var r;const n={$gte:`${g[0]} 00:00:00`,$lte:`${g[1]} 23:59:59`};t.emit("filter",n),(r=m.value)==null||r.hide()},"filter"),defaultValue:p,tooltip:m}}}),vt={class:"inline-block"};function gt(e,t,m,p,d,g){const n=y("k-button"),r=y("k-datepicker"),s=y("k-tooltip");return e.modal?(a(),b(r,{key:1,"min-date":e.min,"max-date":e.max,range:!0,time:!1,clearable:!0,value:e.defaultValue,size:"sm",onChange:e.filter},null,8,["min-date","max-date","value","onChange"])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"transparent",arrow:!1,"hide-on-click":"",placement:"bottom","max-width":400},{content:_(()=>[f(r,{"min-date":e.min,"max-date":e.max,range:!0,time:!1,clearable:!0,value:e.defaultValue,inline:"",onChange:e.filter},null,8,["min-date","max-date","value","onChange"])]),default:_(()=>[v("div",vt,[f(n,{size:"sm",icon:"calendar",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(gt,"_sfc_render$4");const yt=z(pe,[["render",gt]]);pe.__docgenInfo={displayName:"KTableFilterDate",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"max",type:{name:"string"},defaultValue:{func:!1,value:"dayjs().format('YYYY-MM-DD')"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ke=S({name:"KTableFilterRange",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:100}},emits:["filter"],setup(e,t){const m=x(),p=N("dropdown"),d=N([0,0]),g=N(),n=u(()=>{const C=document.querySelector(`#${m}`);!C||(C.innerHTML="")},"initSlider");Y(()=>{n()});const r=T(()=>e.value&&e.value.$gte&&e.value.$lte?[e.value.$gte,e.value.$lte]:"");return{id:m,dropdown:p,filter:u(()=>{const C={$gte:d.value[0],$lte:d.value[1]};g.value.hide(),t.emit("filter",C)},"filter"),defaultValue:r,reset:u(()=>{g.value.hide(),t.emit("filter",null)},"reset")}}}),bt={class:"flex items-center px-6 py-4"},$t=["id"],ht={class:"ms-10 flex align-items-center"};function _t(e,t,m,p,d,g){const n=y("k-icon"),r=y("k-tooltip");return a(),b(r,null,{content:_(()=>[v("div",bt,[v("div",{id:`${e.id}`,class:"noUi-target noUi-target-primary w-150px w-xxl-200px noUi-sm"},null,8,$t),v("div",ht,[v("a",{class:"text-danger cursor-pointer me-2 d-inline-flex",onClick:t[0]||(t[0]=(...s)=>e.reset&&e.reset(...s))},[f(n,{icon:"square-xmark",size:1})]),v("a",{class:"text-success cursor-pointer d-inline-flex",onClick:t[1]||(t[1]=(...s)=>e.filter&&e.filter(...s))},[f(n,{icon:"square-check",size:1})])])])]),default:_(()=>[f(n,{icon:"filter",class:V([{"text-primary":e.defaultValue},"ml-2"])},null,8,["class"])]),_:1})}u(_t,"_sfc_render$3");const Ct=z(ke,[["render",_t]]);ke.__docgenInfo={displayName:"KTableFilterRange",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"100"}}],events:[{name:"filter"}]};const ve=S({name:"KTableFilterText",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:100},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=N(),p=N(""),d=N(!1),g=T(()=>e.value&&e.value.$like?e.value.$like:"");return Y(()=>{e.value&&e.value.$like&&(p.value=e.value.$like)}),{visible:d,tooltip:m,filter:u(()=>{var $;const s={$like:p.value};t.emit("filter",s),($=m.value)==null||$.hide()},"filter"),defaultValue:g,reset:u(()=>{var s;p.value="",t.emit("filter",null),(s=m.value)==null||s.hide()},"reset"),inputText:p}}}),wt={class:"inline-block"},Tt={class:"flex items-center"},Ft={class:"ml-4 flex items-center"},Vt={key:1,class:"flex items-center"},Nt={class:"ml-4 flex items-center"};function Kt(e,t,m,p,d,g){const n=y("k-button"),r=y("k-input"),s=y("k-tooltip");return e.modal?(a(),h("div",Vt,[f(r,{modelValue:e.inputText,"onUpdate:modelValue":t[1]||(t[1]=$=>e.inputText=$),type:"text",size:"sm",width:150,placeholder:"Lorem ipsum",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","onKeyup"]),v("div",Nt,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"filter",arrow:!1,"hide-on-click":"",placement:"bottom","max-width":400},{content:_(()=>[v("div",Tt,[f(r,{modelValue:e.inputText,"onUpdate:modelValue":t[0]||(t[0]=$=>e.inputText=$),type:"text",size:"sm",width:150,placeholder:"Lorem ipsum",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","onKeyup"]),v("div",Ft,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])]),default:_(()=>[v("div",wt,[f(n,{size:"sm",icon:"filter",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(Kt,"_sfc_render$2");const qt=z(ve,[["render",Kt]]);ve.__docgenInfo={displayName:"KTableFilterText",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"100"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ge=S({name:"KTableFilterNumber",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:0},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=x(),p=N(),d=N(),g=T(()=>e.value&&e.value.$eq?e.value.$eq:"");return Y(()=>{e.value&&e.value.$eq&&(d.value=e.value.$eq)}),{id:m,filter:u(()=>{var $;const s={$eq:d.value};t.emit("filter",s),($=p.value)==null||$.hide()},"filter"),defaultValue:g,reset:u(()=>{var s;d.value=void 0,t.emit("filter",null),(s=p.value)==null||s.hide()},"reset"),inputText:d,tooltip:p}}}),St={class:"inline-block"},zt={class:"flex items-center"},It={class:"ml-4 flex align-items-center"},Ot={key:1,class:"flex items-center"},Rt={class:"ml-4 flex align-items-center"};function Mt(e,t,m,p,d,g){const n=y("k-button"),r=y("k-input"),s=y("k-tooltip");return e.modal?(a(),h("div",Ot,[f(r,{modelValue:e.inputText,"onUpdate:modelValue":t[1]||(t[1]=$=>e.inputText=$),type:"number",size:"sm",width:90,min:e.min,max:e.max||void 0,placeholder:"0",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","min","max","onKeyup"]),v("div",Rt,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"filter",arrow:!1,"hide-on-click":"",placement:"bottom"},{content:_(()=>[v("div",zt,[f(r,{modelValue:e.inputText,"onUpdate:modelValue":t[0]||(t[0]=$=>e.inputText=$),type:"number",size:"sm",width:90,min:e.min,max:e.max||void 0,placeholder:"0",onKeyup:H(e.filter,["enter"])},null,8,["modelValue","min","max","onKeyup"]),v("div",It,[f(n,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),f(n,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])]),default:_(()=>[v("div",St,[f(n,{size:"sm",icon:"filter",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(Mt,"_sfc_render$1");const At=z(ge,[["render",Mt]]);ge.__docgenInfo={displayName:"KTableFilterNumber",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ye=S({name:"KTable",autoload:!0,components:{KTableDate:Ye,KTableImage:Ze,KTableStatus:xe,KTablePrice:tt,KTableCode:nt,KTableOrder:ot,KTableLimit:ct,KTableFilterSelect:kt,KTableFilterDate:yt,KTableFilterRange:Ct,KTableFilterText:qt,KTableFilterNumber:At},props:je,emits:["fetch","filter"],setup(e,t){const m=u(L=>!!t.slots[L],"hasSlot"),p=x(),d=Ie(),g=Me(),n=N(!1),{isRowOpen:r,toggleRow:s}=Ue(e),{cols:$,colLength:C}=Be(e,t.slots),{toggleCheck:i,isRowChecked:c,toggleGlobalCheck:w,populateChecks:O,isCheckedAll:A}=Le(e),{isMore:j,loadMore:E,busy:P,data:J,refresh:Q}=De(t,e),{order:Z,loadStoreParams:l,limit:F,filter:o,query:G,resetFilters:B,strict:$e}=ie(t,e);Fe(J,O,{deep:!0}),O(),l();const ee=T(()=>{const L=d.get("isMobileView",!1),W=d.get("isTabletView",!1);return!!(L||W)}),he=T(()=>e.card===!0||e.card==="auto"&&ee.value),_e=u(()=>{B(),n.value=!1},"resetAndClose"),Ce=u((L,W)=>{L.url&&g.push({name:L.url.name,params:{id:W[L.url.id]}})},"goToUrl");return Y(()=>{ae.value=!0,t.emit("fetch",G.value)}),{hasSlot:m,cols:$,id:p,refresh:Q,colLength:C,toggleCheck:i,isRowChecked:c,toggleGlobalCheck:w,busy:P,enable404:ae,isCheckedAll:A,isMore:j,loadMore:E,isRowOpen:r,toggleRow:s,params:k,loadStoreParams:l,order:Z,limit:F,filter:o,resetFilters:B,strict:$e,query:G,isMobile:ee,modalOpened:n,cardMode:he,resetAndClose:_e,goToUrl:Ce}}});const be=u(e=>(Se("data-v-1a33c8a1"),e=e(),ze(),e),"_withScopeId"),jt=["id"],Bt={class:"k-table-header-left"},Lt={class:"whitespace-nowrap font-normal"},Ut={class:"k-table-header-toolbar"},Dt=be(()=>v("div",{class:"mx-2"},null,-1)),Pt={key:0,class:"flex z-40 absolute top-0 left-0 w-full h-full items-center justify-center bg-white bg-opacity-80 dark:bg-gray-900 dark:bg-opacity-80 cursor-progress"},Yt={class:"k-table-content"},Et={class:"k-table-tr k-table-head"},Gt={key:0,class:"k-table-td"},Ht=["checked"],Jt={class:"k-table-tr"},Qt={key:0,class:"k-table-td w-6"},Zt=["checked","onChange"],Wt={key:6},Xt=["onClick"],xt={key:1,class:"k-table-td",align:"right"},el=["onClick"],tl={key:0,class:"k-table-tr"},ll=["colspan"],nl={key:3,class:"card-footer text-center border-0 mt-8"},al=be(()=>v("div",{class:"ml-auto"},null,-1)),il={class:"flex flex-col -m-5"},rl={key:0,class:"text-base border-b border-b-gray-100 dark:border-b-gray-700 last:border-0 uppercase font-bold p-5 flex flex-row justify-between items-center"};function sl(e,t,m,p,d,g){const n=y("k-title"),r=y("k-button"),s=y("k-icon"),$=y("k-table-order"),C=y("k-table-filter-select"),i=y("k-table-filter-date"),c=y("k-table-filter-range"),w=y("k-table-filter-text"),O=y("k-table-filter-number"),A=y("k-table-date"),j=y("k-table-image"),E=y("k-table-status"),P=y("k-table-price"),J=y("k-table-code"),Q=y("k-table-limit"),Z=y("k-drawer");return a(),h("div",{id:e.id,class:"k-table"},[e.header?(a(),h("div",{key:0,class:V(["k-table-header",{"k-table-header-clean":e.clean}])},[R(e.$slots,"header-left",{},()=>[v("h3",Bt,[f(n,{size:5,bold:""},{subtitle:_(()=>[R(e.$slots,"subtitle",{selected:e.selected,query:e.query},()=>[v("span",Lt,M(e.total)+" registros ",1)],!0)]),default:_(()=>[R(e.$slots,"title",{selected:e.selected,query:e.query},()=>[q(" Listado ")],!0)]),_:3})])],!0),v("div",Ut,[R(e.$slots,"header-right",{selected:e.selected,query:e.query},void 0,!0),Dt,e.cardMode?(a(),b(r,{key:0,icon:"filter",color:e.query.filter?"primary":"gray",title:"Filtrar",loading:e.loading,class:"mr-2",onClick:t[0]||(t[0]=l=>e.modalOpened=!0)},null,8,["color","loading"])):(a(),b(r,{key:1,icon:"filter-slash",color:"gray",title:"Limpiar filtros",loading:e.loading,class:"mr-2",onClick:e.resetFilters},null,8,["loading","onClick"])),e.params.strict?(a(),b(r,{key:2,icon:"object-intersect",color:"gray",title:"Filtro estricto",loading:e.loading,class:"mr-2",onClick:t[1]||(t[1]=l=>e.strict(!1))},null,8,["loading"])):(a(),b(r,{key:3,icon:"object-union",color:"gray",title:"Filtro flexible",loading:e.loading,class:"mr-2",onClick:t[2]||(t[2]=l=>e.strict(!0))},null,8,["loading"])),f(r,{icon:"rotate",color:"primary",light:"",title:"Refrescar",loading:e.loading,onClick:e.refresh},null,8,["loading","onClick"])])],2)):K("",!0),e.cardMode?(a(),b(Ve(e.cardTag),{key:1,class:V(e.cardClasses)},{default:_(()=>[(a(!0),h(I,null,D(e.data,(l,F)=>R(e.$slots,"card",te(le({key:F},{row:l,query:e.query,index:F})),void 0,!0)),128))]),_:3},8,["class"])):(a(),h("div",{key:2,class:V(["k-table-body",{"k-table-body-clean":e.clean}])},[f(Ne,{name:"animated_fade","enter-active-class":"animate__animated animate__faster animate__fadeIn","leave-active-class":"animate__animated animate__faster animate__fadeOut"},{default:_(()=>[e.loading?(a(),h("div",Pt,[f(s,{icon:"spinner-third",spin:"",class:"text-primary",size:40})])):K("",!0)]),_:1}),v("div",Yt,[v("div",Et,[e.selected?(a(),h("div",Gt,[v("input",{type:"checkbox",class:"k-checkbox w-4 h-4 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 text-primary focus:ring-primary dark:focus:ring-primary",checked:e.isCheckedAll,onChange:t[3]||(t[3]=(...l)=>e.toggleGlobalCheck&&e.toggleGlobalCheck(...l))},null,40,Ht)])):K("",!0),(a(!0),h(I,null,D(e.cols,(l,F)=>(a(),h("div",{key:F,style:ne(l.style),class:"k-table-td"},[l.order&&l.index?(a(),b($,{key:0,value:e.params.order&&e.params.order[l.index]||null,class:"-mr-3",onOrder:o=>e.order(l.index,o)},{default:_(()=>[q(M(l.title),1)]),_:2},1032,["value","onOrder"])):(a(),h(I,{key:1},[q(M(l.title),1)],64)),l.filter&&l.index?(a(),h(I,{key:2},[l.filter.type==="select"&&l.filter.options.length>0?(a(),b(C,{key:0,options:l.filter.options,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:o=>e.filter(l.index,o)},null,8,["options","value","onFilter"])):l.filter.type==="date"?(a(),b(i,{key:1,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:o=>e.filter(l.index,o)},null,8,["min","max","value","onFilter"])):l.filter.type==="range"?(a(),b(c,{key:2,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:o=>e.filter(l.index,o)},null,8,["min","max","value","onFilter"])):l.filter.type==="text"?(a(),b(w,{key:3,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:o=>e.filter(l.index,o)},null,8,["value","onFilter"])):l.filter.type==="number"?(a(),b(O,{key:4,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,onFilter:o=>e.filter(l.index,o)},null,8,["min","max","value","onFilter"])):K("",!0)],64)):K("",!0)],4))),128))]),(a(!0),h(I,null,D(e.data,(l,F)=>(a(),h(I,{key:F},[v("div",Jt,[e.selected?(a(),h("div",Qt,[v("div",null,[v("input",{type:"checkbox",class:"k-checkbox w-4 h-4 -mt-1 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 text-primary focus:ring-primary dark:focus:ring-primary",checked:e.isRowChecked[F],onChange:o=>e.toggleCheck(F)},null,40,Zt)])])):K("",!0),(a(!0),h(I,null,D(e.cols,(o,G)=>(a(),h("div",{key:G,style:ne(o.style),class:"k-table-td"},[o.makeup==="date"?(a(),b(A,{key:0,value:l[o.index],class:V({"cursor-pointer":o.url}),onClick:B=>e.goToUrl(o,l)},null,8,["value","class","onClick"])):o.makeup==="image"?(a(),b(j,{key:1,value:l[o.index]},null,8,["value"])):o.makeup==="status"?(a(),b(E,{key:2,value:l[o.index],class:V({"cursor-pointer":o.url}),onClick:B=>e.goToUrl(o,l)},null,8,["value","class","onClick"])):o.makeup==="price"?(a(),b(P,{key:3,value:l[o.index],class:V({"cursor-pointer":o.url}),onClick:B=>e.goToUrl(o,l)},null,8,["value","class","onClick"])):o.makeup==="code"?(a(),b(J,{key:4,value:l[o.index],class:V({"cursor-pointer":o.url}),onClick:B=>e.goToUrl(o,l)},null,8,["value","class","onClick"])):o.slot?R(e.$slots,o.slot,te(le({key:5},{row:l,value:l[o.index],query:e.query,index:F})),void 0,!0):(a(),h("div",Wt,[v("span",{class:V({"cursor-pointer":o.url}),onClick:B=>e.goToUrl(o,l)},M(l[o.index]),11,Xt)]))],4))),128)),e.hasSlot("content")?(a(),h("div",xt,[v("a",{class:"btn btn-icon btn-gray-300 cursor-pointer",onClick:o=>e.toggleRow(F)},[v("i",{class:V([e.isRowOpen[F]?"fa-chevron-up":"fa-chevron-down","fas"])},null,2)],8,el)])):K("",!0)]),e.hasSlot("content")?Ke((a(),h("tr",tl,[v("td",{colspan:e.colLength},[R(e.$slots,"content",{row:l,query:e.query,index:F},void 0,!0)],8,ll)],512)),[[qe,e.isRowOpen[F]]]):K("",!0)],64))),128))])],2)),e.isMore?(a(),h("div",nl,[f(Q,{loading:e.loading,value:e.params.limit,onLimit:e.limit,onNextPage:e.loadMore},null,8,["loading","value","onLimit","onNextPage"])])):K("",!0),f(Z,{modelValue:e.modalOpened,"onUpdate:modelValue":t[5]||(t[5]=l=>e.modalOpened=l),title:"Filtros",width:400},{footer:_(()=>[al,f(r,{icon:"filter-slash",color:"danger",class:"mr-2",onClick:e.resetAndClose},{default:_(()=>[q(" Resetear ")]),_:1},8,["onClick"]),f(r,{icon:"filter",color:"primary",onClick:t[4]||(t[4]=l=>e.modalOpened=!1)},{default:_(()=>[q(" Guardar ")]),_:1})]),default:_(()=>[v("div",il,[(a(!0),h(I,null,D(e.cols,(l,F)=>(a(),h(I,{key:F},[l.order||l.filter?(a(),h("div",rl,[l.order&&l.index?(a(),b($,{key:0,value:e.params.order&&e.params.order[l.index]||null,onOrder:o=>e.order(l.index,o)},{default:_(()=>[q(M(l.title),1)]),_:2},1032,["value","onOrder"])):(a(),h(I,{key:1},[q(M(l.title),1)],64)),l.filter&&l.index?(a(),h(I,{key:2},[l.filter.type==="select"&&l.filter.options.length>0?(a(),b(C,{key:0,options:l.filter.options,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:o=>e.filter(l.index,o)},null,8,["options","value","onFilter"])):l.filter.type==="date"?(a(),b(i,{key:1,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:o=>e.filter(l.index,o)},null,8,["min","max","value","onFilter"])):l.filter.type==="range"?(a(),b(c,{key:2,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:o=>e.filter(l.index,o)},null,8,["min","max","value","onFilter"])):l.filter.type==="text"?(a(),b(w,{key:3,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:o=>e.filter(l.index,o)},null,8,["value","onFilter"])):l.filter.type==="number"?(a(),b(O,{key:4,min:l.filter.min,max:l.filter.max,value:e.params.filter&&e.params.filter[l.index]?e.params.filter[l.index]:null,modal:"",onFilter:o=>e.filter(l.index,o)},null,8,["min","max","value","onFilter"])):K("",!0)],64)):K("",!0)])):K("",!0)],64))),128))])]),_:1},8,["modelValue"])],8,jt)}u(sl,"_sfc_render");const gl=z(ye,[["render",sl],["__scopeId","data-v-1a33c8a1"]]);ye.__docgenInfo={displayName:"KTable",exportName:"default",description:"",tags:{},events:[{name:"fetch"},{name:"filter"}],slots:[{name:"header-left"},{name:"title",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"subtitle",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"header-right",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"card",scoped:!0,bindings:[{name:"row",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"}]},{name:"col.slot",scoped:!0,description:"Slots personalizados",bindings:[{name:"row",title:"binding"},{name:"value",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"},{name:"name",title:"binding"}]},{name:"content",scoped:!0,description:"Contenido adicional de la fila",tags:{mock:[{description:"Click me",title:"mock"}]},bindings:[{name:"row",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"}]}]};export{gl as K};
//# sourceMappingURL=k-table.db3e01b5.js.map
