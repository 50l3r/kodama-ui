var Te=Object.defineProperty;var u=(e,t)=>Te(e,"name",{value:t,configurable:!0});import{z as T,r as K,a as Fe,d as S,k as y,l as a,A as b,o as Y,m as h,p as v,C as N,v as q,t as M,x as _,q as k,B as R,y as V,G as D,F as I,a2 as G,w as Ve,I as ne,J as le,a4 as Ne,T as qe,H as ae,D as Ke,O as Se,a6 as ze,a7 as Ie}from"./vue.esm-bundler.3fc53486.js";import{a as U,u as Oe}from"./query.96bc59cd.js";import{d as X}from"./index.78e4cedb.js";import{_ as z}from"./+plugin-vue+export-helper.ed6a1c48.js";import{m as Me}from"./medium-zoom.esm.33ca94a8.js";import{K as Re}from"./k-badge.982ffe0c.js";import{u as x}from"./utils.e3374581.js";import{b as Le}from"./vue-router.8c0d2937.js";const Ae={ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}},je={index:{type:String,required:!0,description:"Clave primaria de la tabla"},store:{type:String,required:!1,description:"Nombre \xFAnico para almacenamiento en cache"},columns:{type:Array,required:!0,description:"Array con las columnas a mostrar"},data:{type:Array,default:()=>[],description:"Array con los datos a mostrar"},total:{type:Number,default:()=>0,description:"Numero total de registros para la paginaci\xF3n"},loading:{type:Boolean,default:!1,description:"Indica si se estan cargando los datos"},selected:{type:Array,required:!1,description:"Indica si se muestra la columna de checkbox y que items estan seleccionados"},header:{type:Boolean,default:!0,description:"Muestra u oculta la cabecera de la tabla"},clean:{type:Boolean,default:!1,description:"Elimina los estilos por defecto del componente"},requiredFilters:{type:Object,default:null,description:"Filtros requeridos para la consulta. No se pueden eliminar"},card:{type:[Boolean,String],default:!1,description:"Muestra los datos en forma de tarjetas"},cardTag:{type:String,default:"div"},cardClasses:{type:[String,Array],default:()=>[]},pagination:{type:String,default:"infinite"},show404:{type:Boolean,default:!0}};function Be(e,t){const m=T(()=>{const d=e.columns,g=[];return d==null||d.forEach(l=>{let r=l.width||void 0;l.slot==="_image"&&(r="5rem"),l.slot&&["header","footer","content"].includes(l.slot)&&(l.slot="");const s={title:l.title,index:l.index||"",order:l.order||!1,nowrap:l.nowrap||!0,width:r,align:l.align||"left",slot:l.slot||"",makeup:l.makeup||void 0,filter:l.filter,style:{position:"relative"},url:l.url||void 0};s.nowrap&&(s.style["white-space"]="nowrap"),s.align&&(s.style["text-align"]=s.align),s.width&&(s.style.width=s.width),l.style&&(s.style={...s.style,...l.style}),g.push(s)}),g}),p=T(()=>{let d=1;return e.selected!==void 0&&d++,d+=m.value.length,d});return{cols:m,colLength:p}}u(Be,"useColumn");function Ue(e){const t=u(l=>{if(e.selected){const r=e.index||"id",s=e.selected.findIndex($=>$[r]===e.data[l][r]);s>-1?e.selected.splice(s,1):e.selected.push(e.data[l])}},"toggleCheck"),m=T(()=>{const l=e.index||"id";return e.data.map(r=>!!(e.selected&&e.selected.findIndex($=>$[l]===r[l])>-1))}),p=u(()=>{if(e.selected)if(e.selected.length>=e.data.length)e.selected.splice(0,e.selected.length);else{e.selected.splice(0,e.selected.length);for(let r=0;r<e.data.length;r++)e.selected.push(e.data[r])}},"toggleGlobalCheck"),d=u(()=>{if(e.selected){const l=e.index||"id";for(let r=0;r<e.selected.length;r++){const s=e.selected[r],$=e.data.findIndex(C=>C[l]===s[r][l]);$===-1&&e.selected.splice($,1)}}},"populateChecks"),g=T(()=>!!(e.selected&&e.selected.length>=e.data.length));return{toggleCheck:t,isRowChecked:m,toggleGlobalCheck:p,populateChecks:d,isCheckedAll:g}}u(Ue,"useCheck");function De(e){const t=K([]);return{isRowOpen:T(()=>e.data.map((d,g)=>t.value.includes(g))),toggleRow:u(d=>{t.value.includes(d)?t.value=t.value.filter(g=>g!==d):t.value.push(d)},"toggleRow")}}u(De,"useCollapse");const f=Fe({page:1,order:null,filter:null,search:"",limit:20,reset:!0,strict:!0});function re(e,t){const m=u((i,c=null)=>{const w=U();t.store&&(c?w.order(t.store).set(i,c):w.order(t.store).delete(i)),c?f.order?f.order[i]=c:f.order={[i]:c}:f.order&&f.order[i]&&delete f.order[i],f.reset=!0,f.page=1,e.emit("fetch",r.value)},"order"),p=u(i=>{const c=U();t.store&&c.limit(t.store).set(i),f.limit=i,f.reset=!0,f.page=1,e.emit("fetch",r.value)},"limit"),d=u((i,c)=>{const w=U();t.store&&(c!==null?w.filter(t.store).set(i,c):w.filter(t.store).delete(i)),c!==null?f.filter===null?f.filter={[i]:c}:f.filter[i]=c:c===null&&f.filter&&f.filter[i]&&delete f.filter[i],f.reset=!0,f.page=1,e.emit("fetch",r.value)},"filter"),g=u(i=>{const c=U();t.store&&c.strict(t.store).set(i),f.strict=i,e.emit("fetch",r.value)},"strict"),l=u(()=>{const i=U();t.store&&i.filter(t.store).reset(),f.page=1,f.order=null,f.filter=null,f.reset=!0,f.strict=!0,e.emit("fetch",r.value)},"resetFilters"),r=T(()=>{let i=null;if(t.requiredFilters){const c=structuredClone(t.requiredFilters);i=C(c,f.filter,f.strict)}else i=C(null,f.filter,f.strict);return{page:f.page,limit:f.limit,order:f.order,filter:i,reset:f.reset}}),s=u(()=>{const i=U();if(t.store){const c=i.get(t.store);c&&(f.order=c.order,f.limit=c.limit,f.filter=c.filter,f.strict=c.strict)}},"loadStoreParams"),$=u(i=>{let c=[];return Array.isArray(i)?i.forEach(w=>{c=c.concat($(w))}):typeof i=="object"&&Object.keys(i).forEach(w=>{const O=i[w];O&&(w==="$and"||w==="$or"?c=c.concat($(O)):c.push({field:w,value:O}))}),c},"getFieldFilters"),C=u((i=null,c=null,w=!0)=>{if(!i&&!c)return null;if(i&&!c)return i;if(!i&&c)return{[w?"$and":"$or"]:[c]};if(i&&c){["$and","$or"].includes(Object.keys(i)[0])||(i={$and:[i]});const O=$(i),L=[];return Object.keys(c).forEach(A=>{O.find(P=>P.field===A)||L.push({[A]:c[A]})}),i&&(i.$and?w?i.$and.push({$and:L}):i.$and.push({$or:L}):i.$or&&(w?i.$or.push({$and:L}):i.$or.push({$or:L}))),i}},"mergeFilters");return{order:m,loadStoreParams:s,limit:p,filter:d,query:r,resetFilters:l,strict:g}}u(re,"useFilter");const ie=K(!1);function Pe(e,t){const{query:m}=re(e,t),p=T(()=>t.data.length<t.total),d=u($=>{p.value&&(f.page+=1,f.reset=$,e.emit("fetch",m.value))},"loadMore"),g=u($=>{p.value&&f.page>1&&(f.page-=1,f.reset=$,e.emit("fetch",m.value))},"loadLess"),l=T(()=>!!(t.loading||t.data.length>=t.total)),r=T(()=>t.data);return{isMore:p,loadMore:d,loadLess:g,busy:l,data:r,refresh:u(()=>{f.page=1,f.reset=!0,e.emit("fetch",m.value)},"refresh")}}u(Pe,"useFetch");const se=S({name:"KTableDate",props:{value:{type:String,default:""}},setup(e){const t=T(()=>X(e.value).format("LL")),m=T(()=>Ae.ucfirst(X(e.value).fromNow()));return{props:e,text:t,from:m}}});function Ye(e,t,m,p,d,g){const l=y("k-date");return a(),b(l,{simple:"",value:e.value},null,8,["value"])}u(Ye,"_sfc_render$c");const Ee=z(se,[["render",Ye]]);se.__docgenInfo={displayName:"KTableDate",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},defaultValue:{func:!1,value:"''"}}]};const oe=S({name:"KTableImage",props:{value:{type:String,default:""}},setup(e){const t=K();return Y(()=>{Me(t.value)}),{props:e,img:t}}}),Ge="_image_1skvg_1",He={image:Ge},Je=["src"];function Qe(e,t,m,p,d,g){return a(),h("div",{class:N(["rounded-4",e.$style.image])},[v("img",{ref:"img",src:e.value,"data-zoom":""},null,8,Je)],2)}u(Qe,"_sfc_render$b");const Ze={$style:He},We=z(oe,[["render",Qe],["__cssModules",Ze]]);oe.__docgenInfo={displayName:"KTableImage",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string"},defaultValue:{func:!1,value:"''"}}]};const ue=S({name:"KTableStatus",props:{value:{type:[String,Boolean,Number],default:""}},setup(e){const t=T(()=>typeof e.value=="string"?e.value!=="0":typeof e.value=="boolean"?e.value:typeof e.value=="number"?!!e.value:!1);return{props:e,status:t}}}),Xe={class:"badge badge-success"};function xe(e,t,m,p,d,g){return a(),h("span",Xe,[v("i",{class:N(["fad me-2",[e.status?"fa-check":"fa-times"]])},null,2),q(" "+M(e.status?"Activo":"Inactivo"),1)])}u(xe,"_sfc_render$a");const et=z(ue,[["render",xe]]);ue.__docgenInfo={displayName:"KTableStatus",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|boolean|number"},defaultValue:{func:!1,value:"''"}}]};const de=S({name:"KTablePrice",props:{value:{type:[String,Number],default:""}},setup(){return{}}});function tt(e,t,m,p,d,g){const l=y("k-price");return a(),b(l,{value:e.value},null,8,["value"])}u(tt,"_sfc_render$9");const nt=z(de,[["render",tt]]);de.__docgenInfo={displayName:"KTablePrice",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}]};const me=S({name:"KTableCode",components:{KBadge:Re},props:{value:{type:[String,Number],default:""}},setup(){return{}}});function lt(e,t,m,p,d,g){const l=y("k-icon"),r=y("k-badge");return a(),b(r,{size:"xs"},{default:_(()=>[k(l,{icon:"qrcode",class:"mr-2"}),q(" "+M(e.value),1)]),_:1})}u(lt,"_sfc_render$8");const at=z(me,[["render",lt]]);me.__docgenInfo={displayName:"KTableCode",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}}]};const ce=S({name:"KTableOrderFilter",props:{value:{type:[String,null],default:null}},emits:["order"],setup(e,t){return{order:u((p=null)=>{t.emit("order",p)},"order")}}}),it={class:"inline-block"},rt={class:"inline-block"},st={class:"inline-block"};function ot(e,t,m,p,d,g){const l=y("k-button");return e.value&&e.value==="asc"?(a(),h("span",{key:0,class:"cursor-pointer",onClick:t[0]||(t[0]=r=>e.order(null))},[R(e.$slots,"default"),v("div",it,[k(l,{size:"sm",icon:"sort-up",link:"",color:"primary"})])])):e.value&&e.value==="desc"?(a(),h("span",{key:1,class:"cursor-pointer",onClick:t[1]||(t[1]=r=>e.order("asc"))},[R(e.$slots,"default"),v("div",rt,[k(l,{size:"sm",icon:"sort-down",link:"",color:"primary"})])])):(a(),h("span",{key:2,class:"cursor-pointer",onClick:t[2]||(t[2]=r=>e.order("desc"))},[R(e.$slots,"default"),v("div",st,[k(l,{size:"sm",icon:"sort",link:"",color:"gray"})])]))}u(ot,"_sfc_render$7");const ut=z(ce,[["render",ot]]);ce.__docgenInfo={displayName:"KTableOrderFilter",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"'asc' | 'desc' | null"},defaultValue:{func:!1,value:"null"}}],events:[{name:"order"}],slots:[{name:"default"}]};const fe=S({name:"KTableLimit",props:{value:{type:Number,default:20},loading:{type:Boolean,default:!1},type:{type:String,default:"infinite"},page:{type:Number,required:!0},total:{type:Number,required:!0}},emits:["limit","loadMore","next","prev"],setup(e,t){const m=K(!1),p=u(g=>{t.emit("limit",g)},"limit"),d=T(()=>e.page*e.value>=e.total);return{limit:p,visible:m,isLastPage:d}}});const dt={class:"flex flex-row justify-center gap-4"},mt={key:1};function ct(e,t,m,p,d,g){const l=y("k-button"),r=y("k-icon"),s=y("k-dropdown-menu"),$=y("k-dropdown");return a(),h("div",dt,[e.type==="infinite"?(a(),b(l,{key:0,loading:e.loading,disabled:e.loading,onClick:t[0]||(t[0]=C=>e.$emit("loadMore"))},{default:_(()=>[q(" Cargar m\xE1s ")]),_:1},8,["loading","disabled"])):V("",!0),e.type==="manual"?(a(),b(l,{key:1,icon:"chevrons-left",disabled:e.loading||e.page<=1,onClick:t[1]||(t[1]=C=>e.$emit("prev")),color:"gray"},null,8,["disabled"])):V("",!0),k($,{placement:"top"},{content:_(()=>[k(s,{selected:e.value===10},{default:_(()=>[v("a",{class:N(["dropdown-item p-3 cursor-pointer",{active:e.value===10}]),onClick:t[2]||(t[2]=C=>e.limit(10))}," 10 ",2)]),_:1},8,["selected"]),k(s,{selected:e.value===20},{default:_(()=>[v("a",{class:N(["dropdown-item p-3 cursor-pointer",{active:e.value===20}]),onClick:t[3]||(t[3]=C=>e.limit(20))}," 20 ",2)]),_:1},8,["selected"]),k(s,{selected:e.value===30},{default:_(()=>[v("a",{class:N(["dropdown-item p-3 cursor-pointer",{active:e.value===30}]),onClick:t[4]||(t[4]=C=>e.limit(30))}," 30 ",2)]),_:1},8,["selected"]),k(s,{selected:e.value===50},{default:_(()=>[v("a",{class:N(["dropdown-item p-3 cursor-pointer",{active:e.value===50}]),onClick:t[5]||(t[5]=C=>e.limit(50))}," 50 ",2)]),_:1},8,["selected"]),k(s,{selected:e.value===100},{default:_(()=>[v("a",{class:N(["dropdown-item p-3 cursor-pointer",{active:e.value===100}]),onClick:t[6]||(t[6]=C=>e.limit(100))}," 100 ",2)]),_:1},8,["selected"])]),default:_(()=>[k(l,null,{default:_(()=>[e.type==="infinite"?(a(),b(r,{key:0,icon:"ellipsis"})):(a(),h("span",mt,M(e.page),1))]),_:1})]),_:1}),e.type==="manual"?(a(),b(l,{key:2,icon:"chevrons-right",color:"gray",disabled:e.loading||e.isLastPage,onClick:t[7]||(t[7]=C=>e.$emit("next"))},null,8,["disabled"])):V("",!0)])}u(ct,"_sfc_render$6");const ft=z(fe,[["render",ct],["__scopeId","data-v-31d61f0d"]]);fe.__docgenInfo={displayName:"KTableLimit",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"number"},defaultValue:{func:!1,value:"20"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"type",type:{name:"String as () => 'infinite' | 'manual'"},defaultValue:{func:!1,value:"'infinite'"}},{name:"page",type:{name:"number"},required:!0},{name:"total",type:{name:"number"},required:!0}],events:[{name:"loadMore"},{name:"prev"},{name:"next"},{name:"limit"}]};const pe=S({name:"KTableFilterSelect",props:{options:{type:Object,required:!0},value:{type:Object,default:null},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=K(),p=u((l,r)=>{var s;t.emit("filter",{[l]:r}),(s=m.value)==null||s.hide()},"filter"),d=u(()=>{var l;t.emit("filter",null),(l=m.value)==null||l.hide()},"reset"),g=T(()=>e.value&&e.value.$eq!==void 0?e.value.$eq:null);return{tooltip:m,filter:p,reset:d,active:g}}}),pt={class:"inline-block"},kt=["onClick"];function vt(e,t,m,p,d,g){const l=y("k-button"),r=y("k-icon"),s=y("k-dropdown-menu"),$=y("k-dropdown"),C=y("k-select");return e.modal?(a(),b(C,{key:1,size:"sm",option:e.options,"close-on-select":!0,"track-by":"value","label-by":"title"},{option:_(({option:i})=>[v("div",{onClick:c=>e.filter("$eq",i.value)},[i.icon?(a(),b(r,{key:0,class:"mr-2",icon:i.icon},null,8,["icon"])):V("",!0),q(" "+M(i.title)+"asdasd ",1)],8,kt)]),_:1},8,["option"])):(a(),b($,{key:0,ref:"tooltip",placement:"bottom","max-height":200,tag:"span","hide-on-click":""},{content:_(()=>[k(s,{onClick:t[0]||(t[0]=i=>e.reset())},{default:_(()=>[k(r,{class:"mr-2",icon:"list"}),q(" Todo ")]),_:1}),(a(!0),h(I,null,D(e.options,(i,c)=>(a(),b(s,{key:c,selected:e.active===i.value,onClick:w=>e.filter("$eq",i.value)},{default:_(()=>[i.icon?(a(),b(r,{key:0,class:"mr-2",icon:i.icon},null,8,["icon"])):V("",!0),q(" "+M(i.title),1)]),_:2},1032,["selected","onClick"]))),128))]),default:_(()=>[v("div",pt,[k(l,{size:"sm",icon:"filter",link:"",color:e.active!==null?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(vt,"_sfc_render$5");const gt=z(pe,[["render",vt]]);pe.__docgenInfo={displayName:"KTableFilterSelect",exportName:"default",description:"",tags:{},props:[{name:"options",type:{name:"KTableColumnFilter[]"},required:!0},{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ke=S({name:"KTableFilterDate",props:{value:{type:Object,default:null},min:{type:String,default:""},max:{type:String,default:X().format("YYYY-MM-DD")},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=K(),p=T(()=>e.value&&e.value.$gte&&e.value.$lte?[e.value.$gte,e.value.$lte]:"");return{filter:u(g=>{var r;const l={$gte:`${g[0]} 00:00:00`,$lte:`${g[1]} 23:59:59`};t.emit("filter",l),(r=m.value)==null||r.hide()},"filter"),defaultValue:p,tooltip:m}}}),yt={class:"inline-block"};function bt(e,t,m,p,d,g){const l=y("k-button"),r=y("k-datepicker"),s=y("k-tooltip");return e.modal?(a(),b(r,{key:1,"min-date":e.min,"max-date":e.max,range:!0,time:!1,clearable:!0,value:e.defaultValue,size:"sm",onChange:e.filter},null,8,["min-date","max-date","value","onChange"])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"transparent",arrow:!1,"hide-on-click":"",placement:"bottom","max-width":400},{content:_(()=>[k(r,{"min-date":e.min,"max-date":e.max,range:!0,time:!1,clearable:!0,value:e.defaultValue,inline:"",onChange:e.filter},null,8,["min-date","max-date","value","onChange"])]),default:_(()=>[v("div",yt,[k(l,{size:"sm",icon:"calendar",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(bt,"_sfc_render$4");const $t=z(ke,[["render",bt]]);ke.__docgenInfo={displayName:"KTableFilterDate",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"max",type:{name:"string"},defaultValue:{func:!1,value:"dayjs().format('YYYY-MM-DD')"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ve=S({name:"KTableFilterRange",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:100}},emits:["filter"],setup(e,t){const m=x(),p=K("dropdown"),d=K([0,0]),g=K(),l=u(()=>{const C=document.querySelector(`#${m}`);!C||(C.innerHTML="")},"initSlider");Y(()=>{l()});const r=T(()=>e.value&&e.value.$gte&&e.value.$lte?[e.value.$gte,e.value.$lte]:"");return{id:m,dropdown:p,filter:u(()=>{const C={$gte:d.value[0],$lte:d.value[1]};g.value.hide(),t.emit("filter",C)},"filter"),defaultValue:r,reset:u(()=>{g.value.hide(),t.emit("filter",null)},"reset")}}}),ht={class:"flex items-center px-6 py-4"},_t=["id"],Ct={class:"ms-10 flex align-items-center"};function wt(e,t,m,p,d,g){const l=y("k-icon"),r=y("k-tooltip");return a(),b(r,null,{content:_(()=>[v("div",ht,[v("div",{id:`${e.id}`,class:"noUi-target noUi-target-primary w-150px w-xxl-200px noUi-sm"},null,8,_t),v("div",Ct,[v("a",{class:"text-danger cursor-pointer me-2 d-inline-flex",onClick:t[0]||(t[0]=(...s)=>e.reset&&e.reset(...s))},[k(l,{icon:"square-xmark",size:1})]),v("a",{class:"text-success cursor-pointer d-inline-flex",onClick:t[1]||(t[1]=(...s)=>e.filter&&e.filter(...s))},[k(l,{icon:"square-check",size:1})])])])]),default:_(()=>[k(l,{icon:"filter",class:N([{"text-primary":e.defaultValue},"ml-2"])},null,8,["class"])]),_:1})}u(wt,"_sfc_render$3");const Tt=z(ve,[["render",wt]]);ve.__docgenInfo={displayName:"KTableFilterRange",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"100"}}],events:[{name:"filter"}]};const ge=S({name:"KTableFilterText",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:100},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=K(),p=K(""),d=K(!1),g=T(()=>e.value&&e.value.$like?e.value.$like:"");return Y(()=>{e.value&&e.value.$like&&(p.value=e.value.$like)}),{visible:d,tooltip:m,filter:u(()=>{var $;const s={$like:p.value};t.emit("filter",s),($=m.value)==null||$.hide()},"filter"),defaultValue:g,reset:u(()=>{var s;p.value="",t.emit("filter",null),(s=m.value)==null||s.hide()},"reset"),inputText:p}}}),Ft={class:"inline-block"},Vt={class:"flex items-center"},Nt={class:"ml-4 flex items-center"},qt={key:1,class:"flex items-center"},Kt={class:"ml-4 flex items-center"};function St(e,t,m,p,d,g){const l=y("k-button"),r=y("k-input"),s=y("k-tooltip");return e.modal?(a(),h("div",qt,[k(r,{modelValue:e.inputText,"onUpdate:modelValue":t[1]||(t[1]=$=>e.inputText=$),type:"text",size:"sm",width:150,placeholder:"Lorem ipsum",onKeyup:G(e.filter,["enter"])},null,8,["modelValue","onKeyup"]),v("div",Kt,[k(l,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),k(l,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"filter",arrow:!1,"hide-on-click":"",placement:"bottom","max-width":400},{content:_(()=>[v("div",Vt,[k(r,{modelValue:e.inputText,"onUpdate:modelValue":t[0]||(t[0]=$=>e.inputText=$),type:"text",size:"sm",width:150,placeholder:"Lorem ipsum",onKeyup:G(e.filter,["enter"])},null,8,["modelValue","onKeyup"]),v("div",Nt,[k(l,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),k(l,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])]),default:_(()=>[v("div",Ft,[k(l,{size:"sm",icon:"filter",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(St,"_sfc_render$2");const zt=z(ge,[["render",St]]);ge.__docgenInfo={displayName:"KTableFilterText",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"100"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const ye=S({name:"KTableFilterNumber",props:{value:{type:Object,default:null},min:{type:Number,default:0},max:{type:Number,default:0},modal:{type:Boolean,default:!1}},emits:["filter"],setup(e,t){const m=x(),p=K(),d=K(),g=T(()=>e.value&&e.value.$eq?e.value.$eq:"");return Y(()=>{e.value&&e.value.$eq&&(d.value=e.value.$eq)}),{id:m,filter:u(()=>{var $;const s={$eq:d.value};t.emit("filter",s),($=p.value)==null||$.hide()},"filter"),defaultValue:g,reset:u(()=>{var s;d.value=void 0,t.emit("filter",null),(s=p.value)==null||s.hide()},"reset"),inputText:d,tooltip:p}}}),It={class:"inline-block"},Ot={class:"flex items-center"},Mt={class:"ml-4 flex align-items-center"},Rt={key:1,class:"flex items-center"},Lt={class:"ml-4 flex align-items-center"};function At(e,t,m,p,d,g){const l=y("k-button"),r=y("k-input"),s=y("k-tooltip");return e.modal?(a(),h("div",Rt,[k(r,{modelValue:e.inputText,"onUpdate:modelValue":t[1]||(t[1]=$=>e.inputText=$),type:"number",size:"sm",width:90,min:e.min,max:e.max||void 0,placeholder:"0",onKeyup:G(e.filter,["enter"])},null,8,["modelValue","min","max","onKeyup"]),v("div",Lt,[k(l,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),k(l,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])):(a(),b(s,{key:0,ref:"tooltip",interactive:"",trigger:"click",theme:"filter",arrow:!1,"hide-on-click":"",placement:"bottom"},{content:_(()=>[v("div",Ot,[k(r,{modelValue:e.inputText,"onUpdate:modelValue":t[0]||(t[0]=$=>e.inputText=$),type:"number",size:"sm",width:90,min:e.min,max:e.max||void 0,placeholder:"0",onKeyup:G(e.filter,["enter"])},null,8,["modelValue","min","max","onKeyup"]),v("div",Mt,[k(l,{icon:"xmark",color:"danger",size:"sm",title:"Resetear",class:"mr-2",onClick:e.reset},null,8,["onClick"]),k(l,{icon:"check",color:"success",size:"sm",title:"Aplicar",onClick:e.filter},null,8,["onClick"])])])]),default:_(()=>[v("div",It,[k(l,{size:"sm",icon:"filter",link:"",color:e.defaultValue?"primary":"gray"},null,8,["color"])])]),_:1},512))}u(At,"_sfc_render$1");const jt=z(ye,[["render",At]]);ye.__docgenInfo={displayName:"KTableFilterNumber",exportName:"default",description:"",tags:{},props:[{name:"value",type:{name:"Record<string, any> | null"},defaultValue:{func:!1,value:"null"}},{name:"min",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"modal",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"filter"}]};const be=S({name:"KTable",autoload:!0,components:{KTableDate:Ee,KTableImage:We,KTableStatus:et,KTablePrice:nt,KTableCode:at,KTableOrder:ut,KTableLimit:ft,KTableFilterSelect:gt,KTableFilterDate:$t,KTableFilterRange:Tt,KTableFilterText:zt,KTableFilterNumber:jt},props:je,emits:["fetch","filter"],setup(e,t){const m=u(B=>!!t.slots[B],"hasSlot"),p=x(),d=Oe(),g=Le(),l=K(!1),{isRowOpen:r,toggleRow:s}=De(e),{cols:$,colLength:C}=Be(e,t.slots),{toggleCheck:i,isRowChecked:c,toggleGlobalCheck:w,populateChecks:O,isCheckedAll:L}=Ue(e),{isMore:A,loadMore:E,loadLess:P,busy:H,data:J,refresh:Q}=Pe(t,e),{order:n,loadStoreParams:F,limit:o,filter:Z,query:j,resetFilters:ee,strict:he}=re(t,e);Ve(J,O,{deep:!0}),O(),F();const te=T(()=>{const B=d.get("isMobileView",!1),W=d.get("isTabletView",!1);return!!(B||W)}),_e=T(()=>e.card===!0||e.card==="auto"&&te.value),Ce=u(()=>{ee(),l.value=!1},"resetAndClose"),we=u((B,W)=>{B.url&&g.push({name:B.url.name,params:{id:W[B.url.id]}})},"goToUrl");return Y(()=>{ie.value=!0,t.emit("fetch",j.value)}),{hasSlot:m,cols:$,id:p,refresh:Q,colLength:C,toggleCheck:i,isRowChecked:c,toggleGlobalCheck:w,busy:H,enable404:ie,isCheckedAll:L,isMore:A,loadMore:E,loadLess:P,isRowOpen:r,toggleRow:s,params:f,loadStoreParams:F,order:n,limit:o,filter:Z,resetFilters:ee,strict:he,query:j,isMobile:te,modalOpened:l,cardMode:_e,resetAndClose:Ce,goToUrl:we}}});const $e=u(e=>(ze("data-v-0ced6d90"),e=e(),Ie(),e),"_withScopeId"),Bt=["id"],Ut={class:"k-table-header-left"},Dt={class:"whitespace-nowrap font-normal"},Pt={class:"k-table-header-toolbar"},Yt=$e(()=>v("div",{class:"mx-2"},null,-1)),Et={key:0,class:"flex z-40 absolute top-0 left-0 w-full h-full items-center justify-center bg-white bg-opacity-80 dark:bg-gray-900 dark:bg-opacity-80 cursor-progress"},Gt={class:"k-table-content"},Ht={class:"k-table-tr k-table-head"},Jt={key:0,class:"k-table-td"},Qt=["checked"],Zt={class:"k-table-tr"},Wt={key:0,class:"k-table-td w-6"},Xt=["checked","onChange"],xt={key:6},en=["onClick"],tn={key:1,class:"k-table-td",align:"right"},nn=["onClick"],ln={key:0,class:"k-table-tr"},an=["colspan"],rn={key:0,class:"k-table-404"},sn={key:3,class:"card-footer text-center border-0 mt-8"},on=$e(()=>v("div",{class:"ml-auto"},null,-1)),un={class:"flex flex-col -m-5"},dn={key:0,class:"text-base border-b border-b-gray-100 dark:border-b-gray-700 last:border-0 uppercase font-bold p-5 flex flex-row justify-between items-center"};function mn(e,t,m,p,d,g){const l=y("k-title"),r=y("k-button"),s=y("k-icon"),$=y("k-table-order"),C=y("k-table-filter-select"),i=y("k-table-filter-date"),c=y("k-table-filter-range"),w=y("k-table-filter-text"),O=y("k-table-filter-number"),L=y("k-table-date"),A=y("k-table-image"),E=y("k-table-status"),P=y("k-table-price"),H=y("k-table-code"),J=y("k-table-limit"),Q=y("k-drawer");return a(),h("div",{id:e.id,class:N(["k-table",{"k-table-infinite":e.pagination==="infinite"}])},[e.header?(a(),h("div",{key:0,class:N(["k-table-header",{"k-table-header-clean":e.clean}])},[R(e.$slots,"header-left",{},()=>[v("h3",Ut,[k(l,{size:5,bold:""},{subtitle:_(()=>[R(e.$slots,"subtitle",{selected:e.selected,query:e.query},()=>[v("span",Dt,M(e.total)+" registros ",1)],!0)]),default:_(()=>[R(e.$slots,"title",{selected:e.selected,query:e.query},()=>[q(" Listado ")],!0)]),_:3})])],!0),v("div",Pt,[R(e.$slots,"header-right",{selected:e.selected,query:e.query},void 0,!0),Yt,e.cardMode?(a(),b(r,{key:0,icon:"filter",color:e.query.filter?"primary":"gray",title:"Filtrar",loading:e.loading,class:"mr-2",onClick:t[0]||(t[0]=n=>e.modalOpened=!0)},null,8,["color","loading"])):(a(),b(r,{key:1,icon:"filter-slash",color:"gray",title:"Limpiar filtros",loading:e.loading,class:"mr-2",onClick:e.resetFilters},null,8,["loading","onClick"])),e.params.strict?(a(),b(r,{key:2,icon:"object-intersect",color:"gray",title:"Filtro estricto",loading:e.loading,class:"mr-2",onClick:t[1]||(t[1]=n=>e.strict(!1))},null,8,["loading"])):(a(),b(r,{key:3,icon:"object-union",color:"gray",title:"Filtro flexible",loading:e.loading,class:"mr-2",onClick:t[2]||(t[2]=n=>e.strict(!0))},null,8,["loading"])),k(r,{icon:"rotate",color:"primary",light:"",title:"Refrescar",loading:e.loading,onClick:e.refresh},null,8,["loading","onClick"])])],2)):V("",!0),e.cardMode?(a(),b(Ne(e.cardTag),{key:1,class:N(e.cardClasses)},{default:_(()=>[(a(!0),h(I,null,D(e.data,(n,F)=>R(e.$slots,"card",ne(le({key:F},{row:n,query:e.query,index:F})),void 0,!0)),128))]),_:3},8,["class"])):(a(),h("div",{key:2,class:N(["k-table-body",{"k-table-body-clean":e.clean}])},[k(qe,{name:"animated_fade","enter-active-class":"animate__animated animate__faster animate__fadeIn","leave-active-class":"animate__animated animate__faster animate__fadeOut"},{default:_(()=>[e.loading?(a(),h("div",Et,[k(s,{icon:"spinner-third",spin:"",class:"text-primary",size:40})])):V("",!0)]),_:1}),v("div",Gt,[v("div",Ht,[e.selected?(a(),h("div",Jt,[v("input",{type:"checkbox",class:"k-checkbox w-4 h-4 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 text-primary focus:ring-primary dark:focus:ring-primary",checked:e.isCheckedAll,onChange:t[3]||(t[3]=(...n)=>e.toggleGlobalCheck&&e.toggleGlobalCheck(...n))},null,40,Qt)])):V("",!0),(a(!0),h(I,null,D(e.cols,(n,F)=>(a(),h("div",{key:F,style:ae(n.style),class:"k-table-td"},[n.order&&n.index?(a(),b($,{key:0,value:e.params.order&&e.params.order[n.index]||null,class:"-mr-3",onOrder:o=>e.order(n.index,o)},{default:_(()=>[q(M(n.title),1)]),_:2},1032,["value","onOrder"])):(a(),h(I,{key:1},[q(M(n.title),1)],64)),n.filter&&n.index?(a(),h(I,{key:2},[n.filter.type==="select"&&n.filter.options.length>0?(a(),b(C,{key:0,options:n.filter.options,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,onFilter:o=>e.filter(n.index,o)},null,8,["options","value","onFilter"])):n.filter.type==="date"?(a(),b(i,{key:1,min:n.filter.min,max:n.filter.max,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,onFilter:o=>e.filter(n.index,o)},null,8,["min","max","value","onFilter"])):n.filter.type==="range"?(a(),b(c,{key:2,min:n.filter.min,max:n.filter.max,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,onFilter:o=>e.filter(n.index,o)},null,8,["min","max","value","onFilter"])):n.filter.type==="text"?(a(),b(w,{key:3,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,onFilter:o=>e.filter(n.index,o)},null,8,["value","onFilter"])):n.filter.type==="number"?(a(),b(O,{key:4,min:n.filter.min,max:n.filter.max,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,onFilter:o=>e.filter(n.index,o)},null,8,["min","max","value","onFilter"])):V("",!0)],64)):V("",!0)],4))),128))]),(a(!0),h(I,null,D(e.data,(n,F)=>(a(),h(I,{key:F},[v("div",Zt,[e.selected?(a(),h("div",Wt,[v("div",null,[v("input",{type:"checkbox",class:"k-checkbox w-4 h-4 -mt-1 border-gray-300 rounded dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 text-primary focus:ring-primary dark:focus:ring-primary",checked:e.isRowChecked[F],onChange:o=>e.toggleCheck(F)},null,40,Xt)])])):V("",!0),(a(!0),h(I,null,D(e.cols,(o,Z)=>(a(),h("div",{key:Z,style:ae(o.style),class:"k-table-td"},[o.makeup==="date"?(a(),b(L,{key:0,value:n[o.index],class:N({"cursor-pointer":o.url}),onClick:j=>e.goToUrl(o,n)},null,8,["value","class","onClick"])):o.makeup==="image"?(a(),b(A,{key:1,value:n[o.index]},null,8,["value"])):o.makeup==="status"?(a(),b(E,{key:2,value:n[o.index],class:N({"cursor-pointer":o.url}),onClick:j=>e.goToUrl(o,n)},null,8,["value","class","onClick"])):o.makeup==="price"?(a(),b(P,{key:3,value:n[o.index],class:N({"cursor-pointer":o.url}),onClick:j=>e.goToUrl(o,n)},null,8,["value","class","onClick"])):o.makeup==="code"?(a(),b(H,{key:4,value:n[o.index],class:N({"cursor-pointer":o.url}),onClick:j=>e.goToUrl(o,n)},null,8,["value","class","onClick"])):o.slot?R(e.$slots,o.slot,ne(le({key:5},{row:n,value:n[o.index],query:e.query,index:F})),void 0,!0):(a(),h("div",xt,[v("span",{class:N({"cursor-pointer":o.url}),onClick:j=>e.goToUrl(o,n)},M(n[o.index]),11,en)]))],4))),128)),e.hasSlot("content")?(a(),h("div",tn,[v("a",{class:"btn btn-icon btn-gray-300 cursor-pointer",onClick:o=>e.toggleRow(F)},[v("i",{class:N([e.isRowOpen[F]?"fa-chevron-up":"fa-chevron-down","fas"])},null,2)],8,nn)])):V("",!0)]),e.hasSlot("content")?Ke((a(),h("tr",ln,[v("td",{colspan:e.colLength},[R(e.$slots,"content",{row:n,query:e.query,index:F},void 0,!0)],8,an)],512)),[[Se,e.isRowOpen[F]]]):V("",!0)],64))),128))]),e.enable404&&!e.loading&&e.data.length<=0?(a(),h("div",rn,[k(s,{icon:"binary-slash",type:"fad",class:"mb-6 text-6xl"}),k(l,{tag:"h3",size:4,bold:"",center:"",class:"text-gray-600"},{default:_(()=>[q(" Sin resultados ")]),_:1}),k(l,{tag:"h4",size:6,center:"",class:"text-gray-600"},{default:_(()=>[q(" Prueba con una consulta diferente ")]),_:1})])):V("",!0)],2)),e.isMore?(a(),h("div",sn,[k(J,{loading:e.loading,value:e.params.limit,type:e.pagination,page:e.params.page,total:e.total,onLimit:e.limit,onLoadMore:t[4]||(t[4]=n=>e.loadMore(!1)),onNext:t[5]||(t[5]=n=>e.loadMore(!0)),onPrev:t[6]||(t[6]=n=>e.loadLess(!0))},null,8,["loading","value","type","page","total","onLimit"])])):V("",!0),k(Q,{modelValue:e.modalOpened,"onUpdate:modelValue":t[8]||(t[8]=n=>e.modalOpened=n),title:"Filtros",width:400},{footer:_(()=>[on,k(r,{icon:"filter-slash",color:"danger",class:"mr-2",onClick:e.resetAndClose},{default:_(()=>[q(" Resetear ")]),_:1},8,["onClick"]),k(r,{icon:"filter",color:"primary",onClick:t[7]||(t[7]=n=>e.modalOpened=!1)},{default:_(()=>[q(" Guardar ")]),_:1})]),default:_(()=>[v("div",un,[(a(!0),h(I,null,D(e.cols,(n,F)=>(a(),h(I,{key:F},[n.order||n.filter?(a(),h("div",dn,[n.order&&n.index?(a(),b($,{key:0,value:e.params.order&&e.params.order[n.index]||null,onOrder:o=>e.order(n.index,o)},{default:_(()=>[q(M(n.title),1)]),_:2},1032,["value","onOrder"])):(a(),h(I,{key:1},[q(M(n.title),1)],64)),n.filter&&n.index?(a(),h(I,{key:2},[n.filter.type==="select"&&n.filter.options.length>0?(a(),b(C,{key:0,options:n.filter.options,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,modal:"",onFilter:o=>e.filter(n.index,o)},null,8,["options","value","onFilter"])):n.filter.type==="date"?(a(),b(i,{key:1,min:n.filter.min,max:n.filter.max,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,modal:"",onFilter:o=>e.filter(n.index,o)},null,8,["min","max","value","onFilter"])):n.filter.type==="range"?(a(),b(c,{key:2,min:n.filter.min,max:n.filter.max,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,modal:"",onFilter:o=>e.filter(n.index,o)},null,8,["min","max","value","onFilter"])):n.filter.type==="text"?(a(),b(w,{key:3,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,modal:"",onFilter:o=>e.filter(n.index,o)},null,8,["value","onFilter"])):n.filter.type==="number"?(a(),b(O,{key:4,min:n.filter.min,max:n.filter.max,value:e.params.filter&&e.params.filter[n.index]?e.params.filter[n.index]:null,modal:"",onFilter:o=>e.filter(n.index,o)},null,8,["min","max","value","onFilter"])):V("",!0)],64)):V("",!0)])):V("",!0)],64))),128))])]),_:1},8,["modelValue"])],10,Bt)}u(mn,"_sfc_render");const hn=z(be,[["render",mn],["__scopeId","data-v-0ced6d90"]]);be.__docgenInfo={displayName:"KTable",exportName:"default",description:"",tags:{},events:[{name:"fetch"},{name:"filter"}],slots:[{name:"header-left"},{name:"title",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"subtitle",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"header-right",scoped:!0,bindings:[{name:"selected",title:"binding"},{name:"query",title:"binding"}]},{name:"card",scoped:!0,bindings:[{name:"row",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"}]},{name:"col.slot",scoped:!0,description:"Slots personalizados",bindings:[{name:"row",title:"binding"},{name:"value",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"},{name:"name",title:"binding"}]},{name:"content",scoped:!0,description:"Contenido adicional de la fila",tags:{mock:[{description:"Click me",title:"mock"}]},bindings:[{name:"row",title:"binding"},{name:"query",title:"binding"},{name:"index",title:"binding"}]}]};export{hn as K};
//# sourceMappingURL=k-table.80473392.js.map
