var N=Object.defineProperty;var o=(e,a)=>N(e,"name",{value:a,configurable:!0});import{u as D}from"./utils.afff62ba.js";import{d as A,q as w,i as y,r as h,o as l,a as d,b as s,k as v,g as x,e as _,t as p,w as S,j as K,f as j,n as L,m as R,a4 as T,a5 as q}from"./vue.esm-bundler.a8176fea.js";import{_ as H}from"./+plugin-vue+export-helper.ed6a1c48.js";const C=A({name:"KDropzone",props:{modelValue:{type:String,default:""},maxSize:{type:Number,default:5},accept:{type:Array,default:()=>["jpg","jpeg","png","gif","webp","pdf"]},removable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["delete","upload","update:modelValue"],setup(e,a){const b=D(),k=o(t=>!!a.slots[t],"hasSlot"),n=w([]),c=w({name:"",size:0,type:"",fileExtention:"",url:"",isImage:!1}),m=y(()=>e.accept.map(t=>"."+t.toLowerCase()).join(",")),r=y(()=>e.accept.map(t=>t.toLowerCase()).join(", ")),g=y(()=>!0),u=o(t=>{if(t.target.files&&t.target.files[0]){n.value=[];const i=t.target.files[0];if(E(i)){const F=Math.round(i.size/1024/1024*100)/100,V=i.name.split(".").pop(),M=i.name.split(".").shift(),$=["jpg","jpeg","png","gif","webp","svg"].includes(V);let f=new FileReader;f.readAsDataURL(i),f.onload=function(){c.value={name:M,size:F,type:i.type,fileExtention:V,isImage:$,url:f.result?f.result.toString():""},a.emit("update:modelValue",c.value.url),a.emit("upload",i)}}else z(!1)}},"onFileChange"),z=o((t=!1)=>{c.value={name:"",size:0,type:"",fileExtention:"",url:"",isImage:!1},a.emit("update:modelValue",""),a.emit("delete"),t&&(n.value=[])},"onFileReset"),B=o(t=>{t>e.maxSize&&n.value.push(`El fichero debe pesar menos de ${e.maxSize} MB`)},"isFileSizeValid"),I=o(t=>{e.accept.includes(t)||n.value.push(`Extensi\xF3n inv\xE1lida. Los ficheros soportados son: ${e.accept}`)},"isFileTypeValid"),E=o(t=>(B(Math.round(t.size/1024/1024*100)/100),I(t.name.split(".").pop()||""),n.value.length===0),"isFileValid");return{id:b,file:c,hasSlot:k,validExtensions:m,textensions:r,onFileChange:u,errors:n,onFileReset:z,isModelValueImage:g}}});const U=o(e=>(T("data-v-e9de8d9d"),e=e(),q(),e),"_withScopeId"),X={class:"k-dropzone"},G=["for"],J={key:0,class:"flex flex-col max-w-full items-center justify-center pt-5 pb-6"},O={key:1,class:"absolute top-0 left-0 h-full w-full bg-opacity-60 bg-gray-900 z-20 flex items-center justify-center text-white"},P={class:"text-sm flex justify-center max-w-full flex-col font-semibold text-center uppercase z-10 absolute top-0 left-0 bg-gray-100 dark:bg-gray-900 bg-opacity-50 dark:bg-opacity-50 w-full h-full"},Q={key:0,class:"text-xs flex text-center flex-col px-5 whitespace-nowrap w-full"},W={class:"uppercase text-ellipsis overflow-hidden text-gray-800 dark:text-gray-100 px-3"},Y={class:"font-semibold text-gray-700 dark:text-gray-300"},Z={key:1,class:"flex flex-col items-center justify-center pt-5 pb-6"},ee={class:"text-center"},te=U(()=>s("p",{class:"mb-2 text-sm text-gray-500 dark:text-gray-400 text-center"},[s("span",{class:"font-semibold"},"Haz click"),j(" o arrastra tus ficheros ")],-1)),ae={class:"text-xs text-gray-500 dark:text-gray-400"},se={key:1,class:"flex text-center flex-col"},oe={class:"uppercase"},le={class:"font-semibold"},ne=["id","accept"];function ie(e,a,b,k,n,c){const m=h("k-button"),r=h("k-icon"),g=h("k-tooltip");return l(),d("div",X,[s("label",{for:e.id,class:L({"k-dropzone--loading":e.loading,"k-dropzone--error":e.errors.length>0}),style:R({background:e.isModelValueImage?`url('${e.modelValue}') no-repeat center center`:"","background-size":"cover"})},[e.modelValue||e.loading?(l(),d("div",J,[e.loading?x("",!0):(l(),v(m,{key:0,size:"xs",icon:"times",color:"gray",class:"absolute top-0 right-0 m-2 z-20",onClick:a[0]||(a[0]=u=>e.onFileReset(!0))})),e.loading?(l(),d("div",O,[_(r,{icon:"spinner-third",type:"fas",size:30,spin:""})])):x("",!0),s("div",P,[_(r,{icon:"file",type:"far",size:60,class:"mb-3 text-gray-800 dark:text-gray-100"}),e.file.name?(l(),d("div",Q,[s("span",W,p(e.file.name),1),s("span",Y,p(e.file.size)+"MB ",1)])):x("",!0)])])):(l(),d("div",Z,[e.errors.length>0?(l(),v(g,{key:0},{content:S(()=>[s("div",ee,p(e.errors[0]),1)]),default:S(()=>[_(r,{icon:"triangle-exclamation",type:"far",size:30,class:"text-danger mb-3"})]),_:1})):(l(),v(r,{key:1,icon:"upload",type:"far",size:30,class:"text-gray-400 mb-3"})),te,s("p",ae,[e.hasSlot("default")?K(e.$slots,"default",{key:0},()=>[j(p(e.maxSize)+" MB ",1)],!0):(l(),d("div",se,[s("div",oe,p(e.textensions),1),s("div",le," ("+p(e.maxSize)+"MB MAX) ",1)]))])])),s("input",{id:e.id,type:"file",class:"hidden",accept:e.validExtensions,onChange:a[1]||(a[1]=u=>e.onFileChange(u))},null,40,ne)],14,G)])}o(ie,"_sfc_render");const ue=H(C,[["render",ie],["__scopeId","data-v-e9de8d9d"]]);C.__docgenInfo={displayName:"KDropzone",exportName:"default",description:"",tags:{},props:[{name:"modelValue",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"maxSize",type:{name:"number"},defaultValue:{func:!1,value:"5"}},{name:"accept",type:{name:"Array as () => string[]"},defaultValue:{func:!0,value:"() => ['jpg', 'jpeg', 'png', 'gif', 'webp', 'pdf']"}},{name:"removable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"delete"},{name:"upload"},{name:"update:modelValue"}],slots:[{name:"default"}]};export{ue as K};
//# sourceMappingURL=k-dropzone.eeecaa6f.js.map
