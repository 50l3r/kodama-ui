{"version":3,"file":"login.b0e0db7a.js","sources":["../../src/views/auth/login/login.vue"],"sourcesContent":["<template>\n    <k-card id=\"k-login\">\n        <div class=\"p-1 sm:p-5 select-none\">\n            <div class=\"text-center mb-10\">\n                <h1 class=\"mb-3 sm:text-3xl text-2xl uppercase font-bold\">\n                    Iniciar Sesión\n                </h1>\n\n                <div v-if=\"signupEnabled\" class=\"text-gray-400 fw-bold fs-4\">\n                    ¿Nuevo aquí?\n                    <router-link\n                        :to=\"{ name: 'register' }\"\n                        class=\"link-primary fw-bolder\"\n                    >\n                        Regístrate\n                    </router-link>\n                </div>\n            </div>\n\n            <form @submit.prevent=\"submitLogin\">\n                <div class=\"mb-4\">\n                    <k-input\n                        v-model=\"state.username\"\n                        type=\"text\"\n                        placeholder=\"\"\n                        label=\"Email / Usuario\"\n                        tabindex=\"1\"\n                        :errors=\"v$.username.$errors\"\n                    />\n                </div>\n\n                <div class=\"mb-10\">\n                    <k-input\n                        v-model=\"state.password\"\n                        type=\"password\"\n                        name=\"password\"\n                        label=\"Contraseña\"\n                        tabindex=\"2\"\n                        :errors=\"v$.password.$errors\"\n                    />\n                </div>\n\n                <div class=\"text-center\">\n                    <k-button\n                        :loading=\"loading\"\n                        icon=\"right-from-bracket\"\n                        class=\"w-full mb-4\"\n                        :disabled=\"!isValidForm\"\n                        type=\"submit\"\n                    >\n                        Acceder\n                    </k-button>\n\n                    <router-link\n                        :to=\"{ name: 'forgotPassword' }\"\n                        class=\"text-sm\"\n                        tabindex=\"3\"\n                    >\n                        ¿Olvidaste tu contraseña?\n                    </router-link>\n                </div>\n            </form>\n        </div>\n    </k-card>\n</template>\n\n<script lang=\"ts\">\n    import { computed, defineComponent, inject, reactive, ref } from 'vue'\n    import { required } from '@vuelidate/validators'\n\n    import { useConfig } from '@/store'\n\n    import { useRouter } from 'vue-router'\n    import useVuelidate from '@vuelidate/core'\n    import { KodamaParams } from '@/config'\n\n    export default defineComponent({\n        name: 'Login',\n\n        setup() {\n            const auth = inject('$auth') as KodamaParams['auth']\n\n            const router = useRouter()\n            const config = useConfig()\n\n            const signupEnabled = false\n            const loading = ref(false)\n\n            const state = reactive({\n                username: '',\n                password: ''\n            })\n\n            const rules = {\n                password: { required },\n                username: { required }\n            }\n\n            const v$ = useVuelidate(rules, state)\n\n            const isValidForm = computed(() => {\n                return !v$.value.$invalid\n            })\n\n            const submitLogin = async (params: any) => {\n                if (isValidForm.value) {\n                    loading.value = true\n\n                    auth.login(state.username, state.password)\n                        .then(() => {\n                            const homepage = config.get('homepage')\n                            router.push({ name: homepage })\n                        })\n                        .finally(() => {\n                            loading.value = false\n                        })\n                }\n            }\n\n            return {\n                loading,\n                submitLogin,\n                // loginSchema,\n                signupEnabled,\n                state,\n                v$,\n                isValidForm\n            }\n        }\n    })\n</script>\n\n<style>\n    #k-login {\n        @apply w-full sm:w-96;\n    }\n</style>\n"],"names":["_sfc_main","defineComponent","auth","inject","router","useRouter","config","useConfig","signupEnabled","loading","ref","state","reactive","v$","useVuelidate","required","isValidForm","computed","__name","params","homepage","_hoisted_1","_hoisted_4","_resolveComponent","_openBlock","_createBlock","_component_k_card","_withCtx","_createElementVNode","_hoisted_2","_hoisted_3","_createElementBlock","_createTextVNode","_createVNode","_component_router_link","_createCommentVNode","_cache","_withModifiers","args","_ctx","_hoisted_5","_component_k_input","$event","_hoisted_6","_hoisted_7","_component_k_button"],"mappings":"wbA4EI,MAAAA,EAAeC,EAAgB,CAC3B,KAAM,QAEN,OAAQ,CACE,MAAAC,EAAOC,EAAO,OAAO,EAErBC,EAASC,IACTC,EAASC,IAETC,EAAgB,GAChBC,EAAUC,EAAI,EAAK,EAEnBC,EAAQC,EAAS,CACnB,SAAU,GACV,SAAU,EAAA,CACb,EAOKC,EAAKC,EALG,CACV,SAAU,CAAE,SAAAC,CAAS,EACrB,SAAU,CAAE,SAAAA,CAAS,CAAA,EAGMJ,CAAK,EAE9BK,EAAcC,EAAS,IAClB,CAACJ,EAAG,MAAM,QACpB,EAiBM,MAAA,CACH,QAAAJ,EACA,YAjBgBS,EAAA,MAAOC,GAAgB,CACnCH,EAAY,QACZP,EAAQ,MAAQ,GAEhBP,EAAK,MAAMS,EAAM,SAAUA,EAAM,QAAQ,EACpC,KAAK,IAAM,CACF,MAAAS,EAAWd,EAAO,IAAI,UAAU,EACtCF,EAAO,KAAK,CAAE,KAAMgB,CAAU,CAAA,CAAA,CACjC,EACA,QAAQ,IAAM,CACXX,EAAQ,MAAQ,EAAA,CACnB,EACT,EAZgB,eAmBhB,cAAAD,EACA,MAAAG,EACA,GAAAE,EACA,YAAAG,CAAA,CAER,CACJ,CAAC,EA3HgB,MAAAK,EAAA,CAAA,MAAA,mJAEqBC,EAAM,CAAA,IAAA,yCAkC3B,MAAM,oIAzCvBC,EA8DS,QAAA,SA7DLC,EA4DM,EAAAC,EAAAC,EAAA,CAAA,GAAA,WAAA,CAAA,QA3DFC,EAcM,IAAA,CAXGC,EAAA,MAAAP,EAAA,CAAAO,EAEM,MAAaC,EAAA,CAAAC,uBAONC,EAAA,MAAAT,EAAA,CAAAU,EAJL,sBAAoB,EAAAC,EACnBC,EAAwB,CAAA,GAAA,CAAA,KAAA,UAAA,kFAO1CC,EA0CO,GAAA,EAAA,CAAA,CAAA,YAzCH,SAAAC,EAAA,KASMA,EATN,GASMC,EAAA,IAAAC,IAAAC,EAAA,aAAAA,EAAA,YAAA,GAAAD,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,CAPWV,EAAA,MAAMY,EAAQ,CAAAP,EAAAQ,EAAA,CACvB,WAAWF,EAAA,MAAA,SACX,sBAAcH,EAAA,KAAAA,EAAA,GAAAM,GAAAH,EAAA,MAAA,SAAAG,GACd,KAAK,OACL,YAAY,GACX,MAAM,kBAAA,SAAA,gCAaT,EAAA,KAAA,EAAA,CAAA,aAAA,QAAA,CAAA,CAAA,CAAA,EAPWd,EAAA,MAAMe,EAAQ,CAAAV,EAAAQ,EAAA,CACvB,WAAKF,EAAU,MAAA,SACf,sBAAeH,EAAA,KAAAA,EAAA,GAAAM,GAAAH,EAAA,MAAA,SAAAG,GACf,KAAK,WACL,KAAA,WACC,MAAM,gBAAA,SAAA,gCAsBT,EAAA,KAAA,EAAA,CAAA,aAAA,QAAA,CAAA,CAAA,CAAA,IAhBY,MAAOE,EAAA,CAAAX,EACZY,EAAoB,CACzB,QAAMN,EAAA,QACL,KAAA,qBACD,MAAK,cAAA,SAAA,CAAAA,EAAA,4DAKT,EAAA,CAAA,EACK,EAAI,CAAA,UAAA,UAAA,CAAA,EAAAN,EACCC,EAAS,CACf,SAAS,gBAAG,EAAA,MAAA"}